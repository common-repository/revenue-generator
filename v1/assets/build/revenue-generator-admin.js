(()=>{var e={721:(e,t,n)=>{var a;!function(){"use strict";var r={not_string:/[^s]/,not_bool:/[^t]/,not_type:/[^T]/,not_primitive:/[^v]/,number:/[diefg]/,numeric_arg:/[bcdiefguxX]/,json:/[j]/,not_json:/[^j]/,text:/^[^\x25]+/,modulo:/^\x25{2}/,placeholder:/^\x25(?:([1-9]\d*)\$|\(([^)]+)\))?(\+)?(0|'[^$])?(-)?(\d+)?(?:\.(\d+))?([b-gijostTuvxX])/,key:/^([a-z_][a-z_\d]*)/i,key_access:/^\.([a-z_][a-z_\d]*)/i,index_access:/^\[(\d+)\]/,sign:/^[+-]/};function o(e){return s(l(e),arguments)}function i(e,t){return o.apply(null,[e].concat(t||[]))}function s(e,t){var n,a,i,s,c,l,p,d,u,h=1,g=e.length,m="";for(a=0;a<g;a++)if("string"==typeof e[a])m+=e[a];else if("object"==typeof e[a]){if((s=e[a]).keys)for(n=t[h],i=0;i<s.keys.length;i++){if(null==n)throw new Error(o('[sprintf] Cannot access property "%s" of undefined value "%s"',s.keys[i],s.keys[i-1]));n=n[s.keys[i]]}else n=s.param_no?t[s.param_no]:t[h++];if(r.not_type.test(s.type)&&r.not_primitive.test(s.type)&&n instanceof Function&&(n=n()),r.numeric_arg.test(s.type)&&"number"!=typeof n&&isNaN(n))throw new TypeError(o("[sprintf] expecting number but found %T",n));switch(r.number.test(s.type)&&(d=n>=0),s.type){case"b":n=parseInt(n,10).toString(2);break;case"c":n=String.fromCharCode(parseInt(n,10));break;case"d":case"i":n=parseInt(n,10);break;case"j":n=JSON.stringify(n,null,s.width?parseInt(s.width):0);break;case"e":n=s.precision?parseFloat(n).toExponential(s.precision):parseFloat(n).toExponential();break;case"f":n=s.precision?parseFloat(n).toFixed(s.precision):parseFloat(n);break;case"g":n=s.precision?String(Number(n.toPrecision(s.precision))):parseFloat(n);break;case"o":n=(parseInt(n,10)>>>0).toString(8);break;case"s":n=String(n),n=s.precision?n.substring(0,s.precision):n;break;case"t":n=String(!!n),n=s.precision?n.substring(0,s.precision):n;break;case"T":n=Object.prototype.toString.call(n).slice(8,-1).toLowerCase(),n=s.precision?n.substring(0,s.precision):n;break;case"u":n=parseInt(n,10)>>>0;break;case"v":n=n.valueOf(),n=s.precision?n.substring(0,s.precision):n;break;case"x":n=(parseInt(n,10)>>>0).toString(16);break;case"X":n=(parseInt(n,10)>>>0).toString(16).toUpperCase()}r.json.test(s.type)?m+=n:(!r.number.test(s.type)||d&&!s.sign?u="":(u=d?"+":"-",n=n.toString().replace(r.sign,"")),l=s.pad_char?"0"===s.pad_char?"0":s.pad_char.charAt(1):" ",p=s.width-(u+n).length,c=s.width&&p>0?l.repeat(p):"",m+=s.align?u+n+c:"0"===l?u+c+n:c+u+n)}return m}var c=Object.create(null);function l(e){if(c[e])return c[e];for(var t,n=e,a=[],o=0;n;){if(null!==(t=r.text.exec(n)))a.push(t[0]);else if(null!==(t=r.modulo.exec(n)))a.push("%");else{if(null===(t=r.placeholder.exec(n)))throw new SyntaxError("[sprintf] unexpected placeholder");if(t[2]){o|=1;var i=[],s=t[2],l=[];if(null===(l=r.key.exec(s)))throw new SyntaxError("[sprintf] failed to parse named argument key");for(i.push(l[1]);""!==(s=s.substring(l[0].length));)if(null!==(l=r.key_access.exec(s)))i.push(l[1]);else{if(null===(l=r.index_access.exec(s)))throw new SyntaxError("[sprintf] failed to parse named argument key");i.push(l[1])}t[2]=i}else o|=2;if(3===o)throw new Error("[sprintf] mixing positional and named placeholders is not (yet) supported");a.push({placeholder:t[0],param_no:t[1],keys:t[2],sign:t[3],pad_char:t[4],align:t[5],width:t[6],precision:t[7],type:t[8]})}n=n.substring(t[0].length)}return c[e]=a}t.sprintf=o,t.vsprintf=i,"undefined"!=typeof window&&(window.sprintf=o,window.vsprintf=i,void 0===(a=function(){return{sprintf:o,vsprintf:i}}.call(t,n,t,e))||(e.exports=a))}()},588:e=>{e.exports=function(e,t){var n,a,r=0;function o(){var o,i,s=n,c=arguments.length;e:for(;s;){if(s.args.length===arguments.length){for(i=0;i<c;i++)if(s.args[i]!==arguments[i]){s=s.next;continue e}return s!==n&&(s===a&&(a=s.prev),s.prev.next=s.next,s.next&&(s.next.prev=s.prev),s.next=n,s.prev=null,n.prev=s,n=s),s.val}s=s.next}for(o=new Array(c),i=0;i<c;i++)o[i]=arguments[i];return s={args:o,val:e.apply(null,o)},n?(n.prev=s,s.next=n):a=s,r===t.maxSize?(a=a.prev).next=null:r++,n=s,s.val}return t=t||{},o.clear=function(){n=null,a=null,r=0},o}},800:()=>{var e;(e=jQuery).fn.showSnackbar=function(t,n){const a=e(this);a.text(t),a.addClass("rev-gen-snackbar--show"),setTimeout((function(){a.removeClass("rev-gen-snackbar--show")}),n)}}},t={};function n(a){if(t[a])return t[a].exports;var r=t[a]={exports:{}};return e[a](r,r.exports,n),r.exports}n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},n.d=(e,t)=>{for(var a in t)n.o(t,a)&&!n.o(e,a)&&Object.defineProperty(e,a,{enumerable:!0,get:t[a]})},n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{"use strict";n(800);const e=function(e,t){let n;return function(){const a=this,r=arguments;clearTimeout(n),n=setTimeout((function(){e.apply(a,r)}),t)}},t=e=>{const t=document.createElement("input");document.body.appendChild(t),t.value=e,t.select(),document.execCommand("copy"),t.remove()};var a;(a=jQuery)((function(){!function(){const t={body:a("body"),requestSent:!1,somethingChanged:!1,settingsMerchantID:".rev-gen-settings-main-merchant-id",settingsMerchantKey:".rev-gen-settings-main-merchant-key",settingsModalClose:".rev-gen-settings-main-info-modal-cross",rgDashboard:".rev-gen-dashboard-main",helpGAButton:".rev-gen-settings-main-option-info",helpGAModal:".rev-gen-settings-main-info-modal",rgGALaterpayRow:".rg-laterpay-row",rgGAUserRow:".rg-user-row",laterpayLoader:a(".laterpay-loader-wrapper"),rgLayoutWrapper:a(".rev-gen-layout-wrapper"),settingsWrapper:a(".rev-gen-settings-main"),settingsPerMonth:a(".rev-gen-settings-main-post-per-month"),settingsGAUserID:a(".rev-gen-settings-main-ga-code-user"),settingsSaveButton:a(".rev-gen-settings-main-save-settings"),rgGAUserStatus:a("#rgGAUserStatus"),rgGALaterPayStatus:a("#rgGALaterPayStatus"),snackBar:a("#rg_js_SnackBar"),everyInput:a("table.rev-gen-settings-main-table input"),triggerPopup:a(".triggerPopup")},n=function(e){a(e).css("border-color","#19e4ac"),setTimeout((function(){a(e).removeAttr("style")}),5e3)},r=function(e){a(e).css("border-color","#ff1939"),setTimeout((function(){a(e).removeAttr("style")}),5e3)},o=function(e){if(!0===e)return t=window,n=document,a="script",r="rgga",t.GoogleAnalyticsObject=r,t[r]=t[r]||function(){(t[r].q=t[r].q||[]).push(arguments)},t[r].l=1*new Date,o=n.createElement(a),i=n.getElementsByTagName(a)[0],o.async=1,o.src="https://www.google-analytics.com/analytics.js",i.parentNode.insertBefore(o,i),window[window.GoogleAnalyticsObject||"rgga"];var t,n,a,r,o,i},i=function(e,t,n,a,r,i){const s=o(e);"function"==typeof s&&(s("create",revenueGeneratorGlobalOptions.rg_tracking_id,"auto","rgParentTracker"),s("rgParentTracker.send","event",{eventCategory:a,eventAction:n,eventLabel:t,eventValue:r,nonInteraction:i}))},s=function(e,t,n,a,r,i){const s=o(e);"function"==typeof s&&(s("create",revenueGeneratorGlobalOptions.rg_user_tracking_id,"auto","rgUserTracker"),s("rgUserTracker.send","event",{eventCategory:a,eventAction:n,eventLabel:t,eventValue:r,nonInteraction:i}))},c=function(e,t,n,a,r,o,i,s){e("create",t,"auto",n),e(n+".send","event",{eventCategory:o,eventAction:a,eventLabel:r,eventValue:i,nonInteraction:s})};window.rgGlobal={sendLPGAEvent(e,t,n,a,r){void 0===r&&(r=!1);let o=!1;const l=function(){if("boolean"==typeof window.mi_track_user&&!0===window.mi_trac_user)return window[window.GoogleAnalyticsObject||"__gaTracker"]}();let p="";const d=revenueGeneratorGlobalOptions.rg_user_tracking_id,u=revenueGeneratorGlobalOptions.rg_tracking_id;d.length>0&&u.length>0?"function"==typeof l?(p=l.getAll(),p.forEach((function(i){if(d===i.get("trackingId")){o=!0;const s=i.get("name");l(s+".send","event",{eventCategory:t,eventAction:e,eventLabel:n,eventValue:a,nonInteraction:r})}})),!0===o?c(u,"rgParentTracker",e,n,t,a,r):(c(l,u,"rgParentTracker",e,n,t,a,r),c(l,d,"rgUserTracker",e,n,t,a,r))):(i(!0,n,e,t,a,r),s(!0,n,e,t,a,r)):d.length>0&&0===u.length?"function"==typeof l?(p=l.getAll(),p.forEach((function(i){if(d===i.get("trackingId")){o=!0;const s=i.get("name");l(s+".send","event",{eventCategory:t,eventAction:e,eventLabel:n,eventValue:a,nonInteraction:r})}})),!0!==o&&s(!0,n,e,t,a,r)):s(!0,n,e,t,a,r):0===d.length&&u.length>0&&("function"==typeof l?c(l,u,"rgParentTracker",e,n,t,a,r):i(!0,n,e,t,a,r))}},function(){if(t.settingsSaveButton.on("click",e((function(){if(!t.requestSent){t.requestSent=!0;let e=0,o=0,i="low";a.each(t.settingsPerMonth,(function(e,t){a(t).is(":checked")&&(i=a(t).val())}));const s=a(t.settingsMerchantID).val(),c=a(t.settingsMerchantKey).val(),l=t.settingsGAUserID.val();t.rgGAUserStatus.is(":checked")&&(e=t.rgGAUserStatus.val()),t.rgGALaterPayStatus.is(":checked")&&(o=t.rgGALaterPayStatus.val());const p={action:"rg_update_settings",average_post_publish_count:i,merchant_id:s,merchant_key:c,rg_personal_ga_ua_id:l,rg_ga_personal_enabled_status:e,rg_ga_enabled_status:o,security:revenueGeneratorGlobalOptions.rg_global_config_nonce};t.laterpayLoader.css("display","flex"),function(e){a.ajax({url:revenueGeneratorGlobalOptions.ajaxUrl,method:"POST",data:e,dataType:"json"}).done((function(e){t.laterpayLoader.hide(),t.snackBar.showSnackbar(e.data.msg,1500),e.data.merchant?(n(t.settingsMerchantID),n(t.settingsMerchantKey)):(r(t.settingsMerchantID),r(t.settingsMerchantKey)),t.requestSent=!1}))}(p),t.requestSent=!1,t.somethingChanged=!1}}),500)),t.settingsPerMonth.on("click",(function(){t.settingsPerMonth.removeAttr("checked"),a(this).prop("checked",!0)})),t.everyInput.on("change",(function(){t.somethingChanged=!0})),a(window).on("beforeunload",(function(e){if(t.somethingChanged)return e.preventDefault(),!1})),t.rgLayoutWrapper.on("click",(function(){t.helpGAModal&&t.helpGAModal.length>0&&(a(t.helpGAModal).remove(),t.body.removeClass("modal-blur"),a(t.rgGAUserRow).css("background-color","inherit"),a(t.rgGALaterpayRow).css("background-color","inherit"),t.body.find("input").removeClass("input-blur"))})),t.body.on("click",t.helpGAButton,(function(){const e=a(this).attr("data-info-for"),n=t.settingsWrapper.find(t.helpGAModal);if(n.length)t.body.removeClass("modal-blur"),t.body.find("input").removeClass("input-blur"),n.remove();else{const n=wp.template(`revgen-info-${e}`);t.settingsWrapper.append(n),t.body.addClass("modal-blur"),t.body.find("input").addClass("input-blur"),"user"===e?(a(t.rgGAUserRow).find("input").removeClass("input-blur"),a(t.rgGALaterpayRow).removeAttr("style"),a(t.rgGAUserRow).css("background-color","#fff")):(a(t.rgGALaterpayRow).find("input").removeClass("input-blur"),a(t.rgGAUserRow).removeAttr("style"),a(t.rgGALaterpayRow).css("background-color","#fff"))}})),t.body.on("click",t.settingsModalClose,(function(){a(t.helpGAModal).remove(),t.body.removeClass("modal-blur"),a(t.rgGAUserRow).css("background-color","inherit"),a(t.rgGALaterpayRow).css("background-color","inherit"),t.body.find("input").removeClass("input-blur")})),a(".rev-gen__select2",t.rgDashboard).select2({width:"auto",dropdownAutoWidth:!0,dropdownCssClass:":all:",minimumResultsForSearch:-1}),a(t.rgDashboard).length>0){const e=a(t.rgDashboard).data("current"),n="LP RevGen";rgGlobal.sendLPGAEvent("View Dashboard",n,e,0,!0)}}()}()})),function(e){e((function(){!function(){const t={body:e("body"),welcomeScreenWrapper:e(".rev-gen-welcome"),isContribution:e("#rg_Contribution"),isPaywall:e("#rg_Paywall"),laterpayTrackingStatus:e("#welcome-screen-tracking"),snackBar:e("#rg_js_SnackBar")},n=function(e,t){const n={action:"rg_update_global_config",config_key:"is_welcome_done",config_value:e,rg_ga_enabled_status:t,security:revenueGeneratorGlobalOptions.rg_global_config_nonce};a(revenueGeneratorGlobalOptions.ajaxUrl,n)},a=function(n,a){e.ajax({url:n,method:"POST",data:a,dataType:"json"}).done((function(e){t.snackBar.showSnackbar(e.msg,500),t.welcomeScreenWrapper.fadeOut(500,(function(){window.location.reload()}))}))};!function(){const a="LP RevGen",r="Welcome Landing Page";t.isContribution.on("click",(function(){let e=0;t.laterpayTrackingStatus.is(":checked")&&(e=1),n("contribution",e),rgGlobal.sendLPGAEvent(r,a,"Contributions",0,!0)})),t.isPaywall.on("click",(function(){let e=0;t.laterpayTrackingStatus.is(":checked")&&(e=1),n("paywall",e),rgGlobal.sendLPGAEvent(r,a,"Paywall",0,!0)})),t.laterpayTrackingStatus.on("click",(function(){"checked"===e(this).attr("checked")?e(this).attr("checked","checked"):e(this).removeAttr("checked")}))}()}()}))}(jQuery);var r=n(588),o=n.n(r),i=n(721),s=n.n(i);const c=o()(console.error);function l(e,...t){try{return s().sprintf(e,...t)}catch(t){return c("sprintf error: \n\n"+t.toString()),e}}var p,d,u,h;p={"(":9,"!":8,"*":7,"/":7,"%":7,"+":6,"-":6,"<":5,"<=":5,">":5,">=":5,"==":4,"!=":4,"&&":3,"||":2,"?":1,"?:":1},d=["(","?"],u={")":["("],":":["?","?:"]},h=/<=|>=|==|!=|&&|\|\||\?:|\(|!|\*|\/|%|\+|-|<|>|\?|\)|:/;var g={"!":function(e){return!e},"*":function(e,t){return e*t},"/":function(e,t){return e/t},"%":function(e,t){return e%t},"+":function(e,t){return e+t},"-":function(e,t){return e-t},"<":function(e,t){return e<t},"<=":function(e,t){return e<=t},">":function(e,t){return e>t},">=":function(e,t){return e>=t},"==":function(e,t){return e===t},"!=":function(e,t){return e!==t},"&&":function(e,t){return e&&t},"||":function(e,t){return e||t},"?:":function(e,t,n){if(e)throw t;return n}};var m={contextDelimiter:"",onMissingKey:null};function v(e,t){var n;for(n in this.data=e,this.pluralForms={},this.options={},m)this.options[n]=void 0!==t&&n in t?t[n]:m[n]}v.prototype.getPluralForm=function(e,t){var n,a,r,o,i=this.pluralForms[e];return i||("function"!=typeof(r=(n=this.data[e][""])["Plural-Forms"]||n["plural-forms"]||n.plural_forms)&&(a=function(e){var t,n,a;for(t=e.split(";"),n=0;n<t.length;n++)if(0===(a=t[n].trim()).indexOf("plural="))return a.substr(7)}(n["Plural-Forms"]||n["plural-forms"]||n.plural_forms),o=function(e){var t=function(e){for(var t,n,a,r,o=[],i=[];t=e.match(h);){for(n=t[0],(a=e.substr(0,t.index).trim())&&o.push(a);r=i.pop();){if(u[n]){if(u[n][0]===r){n=u[n][1]||n;break}}else if(d.indexOf(r)>=0||p[r]<p[n]){i.push(r);break}o.push(r)}u[n]||i.push(n),e=e.substr(t.index+n.length)}return(e=e.trim())&&o.push(e),o.concat(i.reverse())}(e);return function(e){return function(e,t){var n,a,r,o,i,s,c=[];for(n=0;n<e.length;n++){if(i=e[n],o=g[i]){for(a=o.length,r=Array(a);a--;)r[a]=c.pop();try{s=o.apply(null,r)}catch(e){return e}}else s=t.hasOwnProperty(i)?t[i]:+i;c.push(s)}return c[0]}(t,e)}}(a),r=function(e){return+o({n:e})}),i=this.pluralForms[e]=r),i(t)},v.prototype.dcnpgettext=function(e,t,n,a,r){var o,i,s;return o=void 0===r?0:this.getPluralForm(e,r),i=n,t&&(i=t+this.options.contextDelimiter+n),(s=this.data[e][i])&&s[o]?s[o]:(this.options.onMissingKey&&this.options.onMissingKey(n,e),0===o?n:a)};const y={"":{plural_forms:e=>1===e?0:1}},f=/^i18n\.(n?gettext|has_translation)(_|$)/,b=function(e){return"string"!=typeof e||""===e?(console.error("The namespace must be a non-empty string."),!1):!!/^[a-zA-Z][a-zA-Z0-9_.\-\/]*$/.test(e)||(console.error("The namespace can only contain numbers, letters, dashes, periods, underscores and slashes."),!1)},w=function(e){return"string"!=typeof e||""===e?(console.error("The hook name must be a non-empty string."),!1):/^__/.test(e)?(console.error("The hook name cannot begin with `__`."),!1):!!/^[a-zA-Z][a-zA-Z0-9_.-]*$/.test(e)||(console.error("The hook name can only contain numbers, letters, dashes, periods and underscores."),!1)},k=function(e,t){return function(n,a,r,o=10){const i=e[t];if(!w(n))return;if(!b(a))return;if("function"!=typeof r)return void console.error("The hook callback must be a function.");if("number"!=typeof o)return void console.error("If specified, the hook priority must be a number.");const s={callback:r,priority:o,namespace:a};if(i[n]){const e=i[n].handlers;let t;for(t=e.length;t>0&&!(o>=e[t-1].priority);t--);t===e.length?e[t]=s:e.splice(t,0,s),i.__current.forEach((e=>{e.name===n&&e.currentIndex>=t&&e.currentIndex++}))}else i[n]={handlers:[s],runs:0};"hookAdded"!==n&&e.doAction("hookAdded",n,a,r,o)}},x=function(e,t,n=!1){return function(a,r){const o=e[t];if(!w(a))return;if(!n&&!b(r))return;if(!o[a])return 0;let i=0;if(n)i=o[a].handlers.length,o[a]={runs:o[a].runs,handlers:[]};else{const e=o[a].handlers;for(let t=e.length-1;t>=0;t--)e[t].namespace===r&&(e.splice(t,1),i++,o.__current.forEach((e=>{e.name===a&&e.currentIndex>=t&&e.currentIndex--})))}return"hookRemoved"!==a&&e.doAction("hookRemoved",a,r),i}},P=function(e,t){return function(n,a){const r=e[t];return void 0!==a?n in r&&r[n].handlers.some((e=>e.namespace===a)):n in r}},O=function(e,t,n=!1){return function(a,...r){const o=e[t];o[a]||(o[a]={handlers:[],runs:0}),o[a].runs++;const i=o[a].handlers;if(!i||!i.length)return n?r[0]:void 0;const s={name:a,currentIndex:0};for(o.__current.push(s);s.currentIndex<i.length;){const e=i[s.currentIndex].callback.apply(null,r);n&&(r[0]=e),s.currentIndex++}return o.__current.pop(),n?r[0]:void 0}},G=function(e,t){return function(){var n,a;const r=e[t];return null!==(n=null===(a=r.__current[r.__current.length-1])||void 0===a?void 0:a.name)&&void 0!==n?n:null}},S=function(e,t){return function(n){const a=e[t];return void 0===n?void 0!==a.__current[0]:!!a.__current[0]&&n===a.__current[0].name}},C=function(e,t){return function(n){const a=e[t];if(w(n))return a[n]&&a[n].runs?a[n].runs:0}};class T{constructor(){this.actions=Object.create(null),this.actions.__current=[],this.filters=Object.create(null),this.filters.__current=[],this.addAction=k(this,"actions"),this.addFilter=k(this,"filters"),this.removeAction=x(this,"actions"),this.removeFilter=x(this,"filters"),this.hasAction=P(this,"actions"),this.hasFilter=P(this,"filters"),this.removeAllActions=x(this,"actions",!0),this.removeAllFilters=x(this,"filters",!0),this.doAction=O(this,"actions"),this.applyFilters=O(this,"filters",!0),this.currentAction=G(this,"actions"),this.currentFilter=G(this,"filters"),this.doingAction=S(this,"actions"),this.doingFilter=S(this,"filters"),this.didAction=C(this,"actions"),this.didFilter=C(this,"filters")}}const A=new T,{addAction:I,addFilter:j,removeAction:L,removeFilter:E,hasAction:R,hasFilter:D,removeAllActions:W,removeAllFilters:U,doAction:F,applyFilters:N,currentAction:$,currentFilter:B,doingAction:q,doingFilter:M,didAction:z,didFilter:V,actions:H,filters:J}=A,K=((e,t,n)=>{const a=new v({}),r=new Set,o=()=>{r.forEach((e=>e()))},i=(e,t="default")=>{a.data[t]={...y,...a.data[t],...e},a.data[t][""]={...y[""],...a.data[t][""]}},s=(e,t)=>{i(e,t),o()},c=(e="default",t,n,r,o)=>(a.data[e]||i(void 0,e),a.dcnpgettext(e,t,n,r,o)),l=(e="default")=>e,p=(e,t,a)=>{let r=c(a,t,e);return n?(r=n.applyFilters("i18n.gettext_with_context",r,e,t,a),n.applyFilters("i18n.gettext_with_context_"+l(a),r,e,t,a)):r};if(n){const e=e=>{f.test(e)&&o()};n.addAction("hookAdded","core/i18n",e),n.addAction("hookRemoved","core/i18n",e)}return{getLocaleData:(e="default")=>a.data[e],setLocaleData:s,resetLocaleData:(e,t)=>{a.data={},a.pluralForms={},s(e,t)},subscribe:e=>(r.add(e),()=>r.delete(e)),__:(e,t)=>{let a=c(t,void 0,e);return n?(a=n.applyFilters("i18n.gettext",a,e,t),n.applyFilters("i18n.gettext_"+l(t),a,e,t)):a},_x:p,_n:(e,t,a,r)=>{let o=c(r,void 0,e,t,a);return n?(o=n.applyFilters("i18n.ngettext",o,e,t,a,r),n.applyFilters("i18n.ngettext_"+l(r),o,e,t,a,r)):o},_nx:(e,t,a,r,o)=>{let i=c(o,r,e,t,a);return n?(i=n.applyFilters("i18n.ngettext_with_context",i,e,t,a,r,o),n.applyFilters("i18n.ngettext_with_context_"+l(o),i,e,t,a,r,o)):i},isRTL:()=>"rtl"===p("ltr","text direction"),hasTranslation:(e,t,r)=>{var o,i;const s=t?t+""+e:e;let c=!(null===(o=a.data)||void 0===o||null===(i=o[null!=r?r:"default"])||void 0===i||!i[s]);return n&&(c=n.applyFilters("i18n.has_translation",c,e,t,r),c=n.applyFilters("i18n.has_translation_"+l(r),c,e,t,r)),c}}})(0,0,A),Q=(K.getLocaleData.bind(K),K.setLocaleData.bind(K),K.resetLocaleData.bind(K),K.subscribe.bind(K),K.__.bind(K));K._x.bind(K),K._n.bind(K),K._nx.bind(K),K.isRTL.bind(K),K.hasTranslation.bind(K);class Z{constructor(e){this.options={id:"",templateData:{},onConfirm:()=>{},onCancel:()=>{},bindings:()=>{},autoShow:!0,keepOpen:!1,closeOutside:!1,...e},this.init()}init(){this.options.autoShow&&this.show()}show(){if(!this.options.id)return;const e=document.querySelector("body"),t=wp.template(this.options.id),n=this.options.templateData?t(this.options.templateData):t();e.insertAdjacentHTML("beforeend",n),this.el=document.getElementById(this.options.id),this.bindEvents()}hide(){document.querySelector(".rev-gen-modal-overlay").remove(),this.el.remove()}bindEvents(){this.el.querySelector("#rg_js_modal_confirm")&&this.el.querySelector("#rg_js_modal_confirm").addEventListener("click",this.onConfirm.bind(this)),this.el.querySelector("#rg_js_modal_cancel")&&this.el.querySelector("#rg_js_modal_cancel").addEventListener("click",this.onCancel.bind(this)),this.el.querySelector("#rg_js_modal_close")&&this.el.querySelector("#rg_js_modal_close").addEventListener("click",this.hide.bind(this)),this.options.closeOutside&&(document.addEventListener("click",this.hide.bind(this),{once:!0}),this.el.addEventListener("click",(e=>{e.stopPropagation()}))),this.el.addEventListener("rev-gen-modal-close",this.hide.bind(this)),"function"==typeof this.options.bindings&&this.options.bindings(this.el)}onConfirm(e){this.options.onConfirm(e,this.el),this.options.keepOpen||this.hide()}onCancel(e){this.options.onCancel(e,this.el),this.options.keepOpen||this.hide()}}function X(e="",t){if(!t||!Object.keys(t).length)return e;let n=e;const a=e.indexOf("?");return-1!==a&&(t=Object.assign(function(e){return(function(e){let t;try{t=new URL(e,"http://example.com").search.substring(1)}catch(e){}if(t)return t}(e)||"").replace(/\+/g,"%20").split("&").reduce(((e,t)=>{const[n,a=""]=t.split("=").filter(Boolean).map(decodeURIComponent);return n&&function(e,t,n){const a=t.length,r=a-1;for(let o=0;o<a;o++){let a=t[o];!a&&Array.isArray(e)&&(a=e.length.toString());const i=!isNaN(Number(t[o+1]));e[a]=o===r?n:e[a]||(i?[]:{}),Array.isArray(e[a])&&!i&&(e[a]={...e[a]}),e=e[a]}}(e,n.replace(/\]/g,"").split("["),a),e}),{})}(e),t),n=n.substr(0,a)),n+"?"+function(e){let t="";const n=Object.entries(e);let a;for(;a=n.shift();){let[e,r]=a;if(Array.isArray(r)||r&&r.constructor===Object){const t=Object.entries(r).reverse();for(const[a,r]of t)n.unshift([`${e}[${a}]`,r])}else void 0!==r&&(null===r&&(r=""),t+="&"+[e,r].map(encodeURIComponent).join("="))}return t.substr(1)}(t)}!function(t){t((function(){!function(){const n={body:t("body"),requestSent:!1,isPublish:!1,previewWrapper:t(".rev-gen-preview-main, .rev-gen-contribution-main"),layoutWrapper:t(".rev-gen-layout-wrapper"),laterpayLoader:t(".laterpay-loader-wrapper"),noResultsWrapper:".rev-gen-preview-main-no-result",contributionBox:t(".rev-gen-contribution-main--box"),searchContentWrapper:t(".rev-gen-preview-main--search"),searchContent:t("#rg_js_searchContent"),currentPaywall:t("#rg_currentPaywall"),searchResultWrapper:t(".rev-gen-preview-main--search-results"),searchResultItem:".rev-gen-preview-main--search-results-item",postPreviewWrapper:t("#rg_js_postPreviewWrapper"),postTitle:".rev-gen-preview-main--post--title",postExcerpt:t("#rg_js_postPreviewExcerpt"),postContent:t("#rg_js_postPreviewContent"),purchaseOverlay:t("#rg_js_purchaseOverlay"),purchaseOverlayRemove:".rg-purchase-overlay-remove",purchaseOptionItems:".rg-purchase-overlay-purchase-options",purchaseOptionItem:".rg-purchase-overlay-purchase-options-item",purchaseOptionItemInfo:".rg-purchase-overlay-purchase-options-item-info",purchaseOptionItemTitle:".rg-purchase-overlay-purchase-options-item-info-title",purchaseOptionItemDesc:".rg-purchase-overlay-purchase-options-item-info-description",purchaseItemPriceIcon:".rg-purchase-overlay-purchase-options-item-price-icon",purchaseOptionItemPrice:".rg-purchase-overlay-purchase-options-item-price-span",purchaseOptionPriceSymbol:".rg-purchase-overlay-purchase-options-item-price-symbol",purchaseOptionAction:".rg-purchase-overlay-purchase-options-item-actions",optionArea:".rg-purchase-overlay-option-area",addOptionArea:".rg-purchase-overlay-option-area-add-option",previewSecondItem:".rg-purchase-overlay-purchase-options .option-item-second",editOption:".rg-purchase-overlay-option-edit",optionRemove:".rg-purchase-overlay-option-remove",purchaseOptionType:"#rg_js_purchaseOptionType",optionManager:".rg-purchase-overlay-option-manager",individualPricingWrapper:".rg-purchase-overlay-option-manager-pricing",individualPricingSelection:".rg-purchase-overlay-option-pricing-selection",purchaseRevenueWrapper:".rg-purchase-overlay-option-manager-revenue",purchaseRevenueSelection:".rg-purchase-overlay-option-revenue-selection",durationWrapper:".rg-purchase-overlay-option-manager-duration",periodCountSelection:".rg-purchase-overlay-option-manager-duration-count",periodSelection:".rg-purchase-overlay-option-manager-duration-period",entitySelection:".rg-purchase-overlay-option-manager-entity",addPaywall:"#rj_js_addNewPaywall",gotoDashboard:"#rg_js_gotoDashboard",actionsWrapper:t(".rev-gen-preview-main--paywall-actions"),actionButtons:t(".rev-gen-preview-main--paywall-actions-update"),activatePaywall:t("#rg_js_activatePaywall"),savePaywall:t("#rg_js_savePaywall"),searchPaywallContent:t("#rg_js_searchPaywallContent"),searchPost:t("#rg_js_searchPost"),applyToSelect:t(".rev-gen-preview-main--paywall-actions-apply select"),select2Multiple:t("#rg_js_searchPaywallContent, #rg_js_searchPost"),searchPaywallWrapper:t(".rev-gen-preview-main--paywall-actions-search"),searchPostWrapper:t(".rev-gen-preview-main--paywall-actions-search-post"),paywallName:t(".rev-gen-preview-main-paywall-name"),paywallNameData:t(".rev-gen-preview-main-paywall-name").text().trim(),paywallTitle:".rg-purchase-overlay-title",paywallDesc:".rg-purchase-overlay-description",paywallAppliesTo:".rev-gen-preview-main-paywall-applies-to",currencyRadio:"[name=currency]",purchaseOptionInfoButton:".rg-purchase-overlay-option-info",purchaseOptionInfoModal:".rev-gen-preview-main-info-modal",accountActionId:"#rev-gen-merchant-id",accountActionKey:"#rev-gen-api-key",activateSignup:"#rg_js_activateSignup",warningSignup:"#rg_js_warningSignup",viewPost:"#rg_js_viewPost",viewDashboard:"#rg_js_viewDashboard",exitTour:".rev-gen-exit-tour",snackBar:t("#rg_js_SnackBar"),emailSupportButton:t(".rev-gen-email-support")},a=function(e,t,a){const r=e.closest(n.purchaseOptionItem);u(),setTimeout((function(){const e=parseInt(r.find(n.periodCountSelection).val()),o=r.find(n.periodSelection).val(),i=r.attr("data-purchase-type");let s,c;switch(s=e+" ",c=e+" ",o){case"h":s+=Q("Hour","revenue-generator"),c+=Q("Hours","revenue-generator");break;case"d":s+=Q("Day","revenue-generator"),c+=Q("Days","revenue-generator");break;case"w":s+=Q("Week","revenue-generator"),c+=Q("Weeks","revenue-generator");break;case"m":s+=Q("Month","revenue-generator"),c+=Q("Months","revenue-generator");break;case"y":s+=Q("Year","revenue-generator"),c+=Q("Years","revenue-generator")}let p=l(Q("Enjoy unlimited access to all our content for %1$s"),s);switch(e&&e>1&&(p=l(Q("Enjoy unlimited access to all our content for %1$s"),c)),i){case"subscription":s+=" "+Q("Subscription","revenue-generator");break;case"timepass":s+=" "+Q("Pass","revenue-generator")}t&&"1"===t||a&&"1"===a?new Z({id:"rg-modal-dynamic-title-desc",onConfirm:async()=>{r.attr("data-custom-desc",""),r.attr("data-custom-title",""),r.find(n.purchaseOptionItemTitle).text(s),r.find(n.purchaseOptionItemDesc).text(p)},onCancel:()=>{}}):(r.find(n.purchaseOptionItemTitle).text(s),r.find(n.purchaseOptionItemDesc).text(p)),h()}),1e3)},r=function(){const e=n.body.find(n.accountActionId).val().trim(),t=n.body.find(n.accountActionKey).val().trim();return!(!e||!t)},o=function(e,n=0,a="",r=[]){const o={action:"rg_post_permalink",preview_post_id:e,category_id:n,applies_to:a,specific_posts_ids:r,security:revenueGeneratorGlobalOptions.rg_paywall_nonce};t.ajax({url:revenueGeneratorGlobalOptions.ajaxUrl,method:"POST",data:o,dataType:"json"}).done((function(e){e.redirect_to&&window.open(e.redirect_to,"_blank")}))},i=function(){if(!n.requestSent){n.requestSent=!0,u();const e=t(n.purchaseOptionItems).attr("data-paywall-id"),a={action:"rg_activate_paywall",paywall_id:e,security:revenueGeneratorGlobalOptions.rg_paywall_nonce};t.ajax({url:revenueGeneratorGlobalOptions.ajaxUrl,method:"POST",data:a,dataType:"json"}).done((function(){n.requestSent=!1,h();const a=n.postPreviewWrapper.attr("data-preview-id"),r=n.searchPaywallContent.text().trim(),i=n.paywallName.text().trim(),s=t(n.paywallAppliesTo).val(),c=n.searchPaywallContent.val(),l=n.searchPost.val();new Z({id:"rg-modal-paywall-activation",templateData:{paywallID:e,paywallName:i,appliedTo:s,categoryName:r,postTitle:t(n.postTitle).text().trim()},onConfirm:async()=>{a&&o(a,c,s,l)},onCancel:async e=>{window.location.href=e.target.dataset.dashboard_url}})}))}},s=function(){new Z({id:"rg-modal-connect-account",keepOpen:!0,templateData:{},onConfirm:async(e,n)=>{const a=new Event("rev-gen-modal-close"),r=t(n),o=t("#rev-gen-merchant-id",r).val(),i=t("#rev-gen-api-key",r).val(),l=t("#rg_js_restartVerification",r);r.addClass("loading");const p=await c(o,i);l.on("click",(function(){n.dispatchEvent(a),s()})),p?(r.removeClass("loading"),n.dispatchEvent(a)):r.removeClass("loading").addClass("modal-error")}})},c=function(e,a){return new Promise((r=>{let o=!1;if(!n.requestSent){n.requestSent=!0;const s={action:"rg_verify_account_credentials",merchant_id:e,merchant_key:a,security:revenueGeneratorGlobalOptions.rg_paywall_nonce};let c="";return t.ajax({url:revenueGeneratorGlobalOptions.ajaxUrl,method:"POST",async:!1,data:s,dataType:"json"}).done((function(e){n.requestSent=!1;const a=t(n.purchaseOptionItems);revenueGeneratorGlobalOptions.merchant_id=e.merchant_id,!0===e.success?(a.attr("data-paywall-id").length?i():(n.isPublish=!0,n.savePaywall.trigger("click"),u(),setTimeout((function(){revenueGeneratorGlobalOptions.globalOptions.is_merchant_verified="1",i(),h()}),2e3)),c="Success",o=!0):(n.isPublish=!0,n.savePaywall.trigger("click"),c="Failure - "+e.msg,o=!1),rgGlobal.sendLPGAEvent("Connect Account","LP RevGen Account",c,0,!0),r(o)})),o}}))},p=function(){const e={action:"rg_complete_tour",config_key:"paywall_tutorial_done",config_value:1,security:revenueGeneratorGlobalOptions.rg_paywall_nonce};t.ajax({url:revenueGeneratorGlobalOptions.ajaxUrl,method:"POST",data:e,dataType:"json"})},d=function(e){if(!n.requestSent){n.requestSent=!0;const a={action:"rg_select_preview_content",post_preview_id:e,security:revenueGeneratorGlobalOptions.rg_paywall_nonce};t.ajax({url:revenueGeneratorGlobalOptions.ajaxUrl,method:"POST",data:a,dataType:"json"}).done((function(e){n.requestSent=!1,e.redirect_to&&(window.location.href=e.redirect_to)}))}},u=function(){n.laterpayLoader.css({display:"flex"})},h=function(){n.laterpayLoader.hide()},g=function(e,a,r=!0){const o={action:"rg_remove_purchase_option",type:e,id:a,paywall_id:t(n.purchaseOptionItems).attr("data-paywall-id"),security:revenueGeneratorGlobalOptions.rg_paywall_nonce};t.ajax({url:revenueGeneratorGlobalOptions.ajaxUrl,method:"POST",data:o,dataType:"json"}).done((function(e){!0===r&&n.snackBar.showSnackbar(e.msg,1500)}))},m=function(){const e=t(n.purchaseOptionItems);if(e.length){e.children(n.purchaseOptionItem).each((function(){const e=(100*t(this).find(n.purchaseOptionItemPrice).text().trim()).toFixed(0);t(this).attr("data-lpc-pricing",e)}));const a=e.find("[data-purchase-type='individual']"),r=e.find("[data-purchase-type='timepass']"),o=e.find("[data-purchase-type='subscription']");a.length&&e.prepend(a),r.length&&(r.sort((function(e,n){return+t(e).attr("data-lpc-pricing")-+t(n).attr("data-lpc-pricing")})),e.find("[data-purchase-type='timepass']").remove(),a.length?e.find(a).after(r):e.prepend(r)),o.length&&(o.sort((function(e,n){return+t(e).data("lpc-pricing")-+t(n).data("lpc-pricing")})),e.find("[data-purchase-type='subscription']").remove(),e.append(o)),e.children(n.purchaseOptionItem).each((function(e){const n=e+1;t(this).attr("data-order",n)}))}},v=function(e,a){const r=t(a).find(".rg-purchase-overlay-option-manager"),o=r.find(n.purchaseRevenueWrapper),i=r.find(n.individualPricingWrapper),s=t(a).attr("data-purchase-type");t(a).attr("data-pricing-type","static"),i.find(n.individualPricingSelection).prop("checked",!1),e>=revenueGeneratorGlobalOptions.currency.sis_only_limit?(t(a).find(n.purchaseOptionItemPrice).attr("data-pay-model","sis"),o.find(n.purchaseRevenueSelection).prop("checked",!1),"subscription"!==s&&(t(a).trigger("mouseenter"),t(a).find(n.editOption).trigger("click"))):(e<=revenueGeneratorGlobalOptions.currency.ppu_min||e>revenueGeneratorGlobalOptions.currency.ppu_min)&&e<revenueGeneratorGlobalOptions.currency.sis_min&&(t(a).find(n.purchaseOptionItemPrice).attr("data-pay-model","ppu"),o.find(n.purchaseRevenueSelection).prop("checked",!0),"subscription"!==s&&(t(a).trigger("mouseenter"),t(a).find(n.editOption).trigger("click")))},y=function(e,a){const r=t(e).find(n.purchaseOptionItemPrice),o=parseFloat(r.text().trim()),i=t(e).attr("data-purchase-type"),s=revenueGeneratorGlobalOptions.currency;let c=f(o);!1===a&&o<=parseFloat(s.ppu_only_limit)?(c=f(s.sis_min,"subscription"===i),n.snackBar.showSnackbar(Q("Pay Now is only available for prices set to $1.99 or higher.","revenue-generator"),2500),"individual"===i?(t(n.purchaseItemPriceIcon).css({display:"none"}),r.text(c)):r.empty().text(c)):!0===a&&o>parseFloat(s.ppu_max)&&(c=f(s.ppu_max,"subscription"===i),n.snackBar.showSnackbar(Q("Pay Later is only available for prices set less than $5.","revenue-generator"),2500),"individual"===i?(t(n.purchaseItemPriceIcon).css({display:"none"}),r.text(c)):r.empty().text(c))},f=function(e,t){return"number"!=typeof e&&(e=e.replace(/[^0-9\,\.]/g,""),e=parseFloat(e.replace(",",".")).toFixed(2)),isNaN(e)&&(e=0),e=Math.abs(e),t?e<revenueGeneratorGlobalOptions.currency.sis_min?e=revenueGeneratorGlobalOptions.currency.sis_min:e>revenueGeneratorGlobalOptions.currency.sis_max&&(e=revenueGeneratorGlobalOptions.currency.sis_max):(e>revenueGeneratorGlobalOptions.currency.sis_max&&(e=revenueGeneratorGlobalOptions.currency.sis_max),e>0&&e<revenueGeneratorGlobalOptions.currency.ppu_min&&(e=revenueGeneratorGlobalOptions.currency.ppu_min)),e=e.toFixed(2),-1!==revenueGeneratorGlobalOptions.locale.indexOf("de_DE")&&(e=e.replace(".",",")),e};t(".rev-gen-preview-main").length&&(function(){if(!revenueGeneratorGlobalOptions.welcome.isPaywallWelcomeDone){const t="Paywall Landing Page",n="LP RevGen Paywall Tutorial";new Z({id:"rg-modal-publishing-frequency",onConfirm:()=>{e("low"),rgGlobal.sendLPGAEvent(t,n,"Fewer than 10",0,!0)},onCancel:()=>{e("high"),rgGlobal.sendLPGAEvent(t,n,"10+",0,!0)}})}const e=function(e){const n={action:"rg_update_global_config",config_key:"average_post_publish_count",config_value:e,security:revenueGeneratorGlobalOptions.rg_global_config_nonce};t.ajax({url:revenueGeneratorGlobalOptions.ajaxUrl,method:"POST",data:n,dataType:"json"})}}(),t(document).ready((function(){n.postPreviewWrapper.fadeIn("slow"),n.applyToSelect.select2({width:"auto",dropdownAutoWidth:!0,dropdownCssClass:":all:"}),t(n.noResultsWrapper).length&&(n.layoutWrapper.css({"background-color":"rgba(0, 0, 0, 0.5)","min-height":"800px"}),n.searchContentWrapper.css({"background-color":"#fff"}),tippy(document.querySelector(".rev-gen-preview-main--search"),{arrow:tippy.roundArrow}).show()),t(n.paywallAppliesTo).trigger("change");const e=t(n.purchaseOptionItems);if(e.length){const t=e.find("[data-purchase-type='individual']");"dynamic"===t.attr("data-pricing-type")&&(t.find(n.purchaseItemPriceIcon).show(),tippy(".rg-purchase-overlay-purchase-options-item-price-icon",{arrow:tippy.roundArrow}))}if(revenueGeneratorGlobalOptions.globalOptions.average_post_publish_count.length&&0===parseInt(revenueGeneratorGlobalOptions.globalOptions.paywall_tutorial_done)&&e&&e.length>0||0===parseInt(revenueGeneratorGlobalOptions.has_paywalls)){const e=new Shepherd.Tour({defaultStepOptions:{classes:"rev-gen-tutorial-card",scrollTo:!0,scrollToHandler:e=>{t("html, body").animate({scrollTop:t(e).offset().top-t(window).height()/2-t(e).height()},1e3)}}});(function(e){const n={text:Q("Skip Tour","revenue-generator"),action:e.complete,classes:"shepherd-content-skip-tour"},a={text:Q("Next >","revenue-generator"),action:e.next,classes:"shepherd-content-next-tour-element"},r="LP RevGen Paywall Tutorial",o="Continue",i=e.addStep({id:"rg-main-search-input",text:Q("Search for the page or post you'd like to preview with Revenue Generator here.","revenue-generator"),attachTo:{element:".rev-gen-preview-main--search",on:"bottom"},arrow:!0,classes:"shepherd-content-add-space-top fade-in",buttons:[n,a],when:{hide(){rgGlobal.sendLPGAEvent("1 - Article Search",r,o,0,!0)}}}).on("before-hide",(()=>{const e=i.options.classes;i.options.classes=e.replace("fade-in","fade-out"),i.updateStepOptions(i.options)})).on("hide",(()=>{t(i.el).removeAttr("hidden"),setTimeout((function(){t(i.el).attr("hidden","")}),700)})),s=e.addStep({id:"rg-purchase-overlay-header",text:Q("Click to Edit","revenue-generator"),attachTo:{element:".rg-purchase-overlay-title",on:"bottom"},arrow:!0,classes:"rev-gen-tutorial-title fade-in",buttons:[a],when:{hide(){rgGlobal.sendLPGAEvent("2 - Name Paywall",r,o,0,!0)}}}).on("before-hide",(()=>{const e=s.options.classes;s.options.classes=e.replace("fade-in","fade-out"),s.updateStepOptions(s.options)})).on("hide",(()=>{t(s.el).removeAttr("hidden"),setTimeout((function(){t(s.el).attr("hidden","")}),700)})),c=e.addStep({id:"rg-purchase-option-item",text:Q("Hover over each element to see the available options.","revenue-generator"),attachTo:{element:".rg-purchase-overlay-purchase-options .option-item-second",on:"top"},arrow:!0,classes:"shepherd-content-add-space-bottom fade-in",buttons:[a],when:{hide(){rgGlobal.sendLPGAEvent("3 - Element Hover",r,o,0,!0)}}}).on("before-hide",(()=>{const e=c.options.classes;c.options.classes=e.replace("fade-in","fade-out"),c.updateStepOptions(c.options)})).on("hide",(()=>{t(c.el).removeAttr("hidden"),setTimeout((function(){t(c.el).attr("hidden","")}),700)})),p=e.addStep({id:"rg-purchase-option-item-edit",text:Q("Click on the ‘more options’ icon to set the product type (single item purchase, time pass, or subscription).","revenue-generator"),attachTo:{element:".rg-purchase-overlay-purchase-options .option-item-second .rg-purchase-overlay-option-edit",on:"left"},arrow:!0,buttons:[a],classes:"fade-in",when:{hide(){rgGlobal.sendLPGAEvent("4 - More Options",r,o,0,!0)}}}).on("before-hide",(()=>{const e=p.options.classes;p.options.classes=e.replace("fade-in","fade-out"),p.updateStepOptions(p.options)})).on("hide",(()=>{t(p.el).removeAttr("hidden"),setTimeout((function(){t(p.el).attr("hidden","")}),700)})),d=e.addStep({id:"rg-purchase-option-item-title",text:Q("Click on any text element to edit it.","revenue-generator"),attachTo:{element:".rg-purchase-overlay-purchase-options .option-item-second .rg-purchase-overlay-purchase-options-item-info .rg-purchase-overlay-purchase-options-item-info-title",on:"top"},arrow:!0,classes:"shepherd-content-add-space-bottom fade-in",buttons:[a],when:{hide(){rgGlobal.sendLPGAEvent("5 - Text Edit",r,o,0,!0)}}}).on("before-hide",(()=>{const e=d.options.classes;d.options.classes=e.replace("fade-in","fade-out"),d.updateStepOptions(d.options)})).on("hide",(()=>{t(d.el).removeAttr("hidden"),setTimeout((function(){t(d.el).attr("hidden","")}),700)})),u=e.addStep({id:"rg-purchase-option-item-price",text:l(Q("These are our recommended prices. %1$s%1$sClick to edit; prices lower than 5.00 will default to %2$spay later%3$s.","revenue-generator"),"<br/>",'<a class="info-link" href="https://www.laterpay.net/academy/getting-started-with-laterpay-the-difference-between-pay-now-pay-later" target="_blank" rel="noopener noreferrer">',"</a>"),attachTo:{element:".rg-purchase-overlay-purchase-options .option-item-second .rg-purchase-overlay-purchase-options-item-price",on:"top"},arrow:!0,classes:"shepherd-content-add-space-bottom fade-in",buttons:[a],when:{hide(){rgGlobal.sendLPGAEvent("6 - Pricing",r,o,0,!0)}}}).on("before-hide",(()=>{const e=u.options.classes;u.options.classes=e.replace("fade-in","fade-out"),u.updateStepOptions(u.options)})).on("hide",(()=>{t(u.el).removeAttr("hidden"),setTimeout((function(){t(u.el).attr("hidden","")}),700)})),h=e.addStep({id:"rg-purchase-option-item-add",text:Q("Hover below the paywall to get the option to add another purchase button.","revenue-generator"),attachTo:{element:".rg-purchase-overlay-option-area-add-option",on:"top"},arrow:!0,classes:"shepherd-content-add-space-bottom fade-in",buttons:[a],when:{hide(){rgGlobal.sendLPGAEvent("7 - Add Purchase Option",r,o,0,!0)}}}).on("before-hide",(()=>{const e=h.options.classes;h.options.classes=e.replace("fade-in","fade-out"),h.updateStepOptions(h.options)})).on("hide",(()=>{t(h.el).removeAttr("hidden"),setTimeout((function(){t(h.el).attr("hidden","")}),700)})),g=e.addStep({id:"rg-purchase-option-paywall-name",text:Q("Click here to change the name of your paywall.","revenue-generator"),attachTo:{element:".rev-gen-preview-main-paywall-name",on:"bottom"},arrow:!0,classes:"shepherd-content-add-space-bottom fade-in",buttons:[a],when:{hide(){rgGlobal.sendLPGAEvent("8 - Name Paywall",r,o,0,!0)}}}).on("before-hide",(()=>{const e=g.options.classes;g.options.classes=e.replace("fade-in","fade-out"),g.updateStepOptions(g.options)})).on("hide",(()=>{t(g.el).removeAttr("hidden"),setTimeout((function(){t(g.el).attr("hidden","")}),700)})),m=e.addStep({id:"rg-purchase-option-paywall-actions-search",text:Q("Select the content that should display this paywall.","revenue-generator"),attachTo:{element:".rev-gen-preview-main--paywall-actions-search",on:"bottom"},arrow:!0,classes:"shepherd-content-add-space-bottom fade-in",buttons:[a],when:{hide(){rgGlobal.sendLPGAEvent("9 - Select Content",r,o,0,!0)}}}).on("before-hide",(()=>{const e=m.options.classes;m.options.classes=e.replace("fade-in","fade-out"),m.updateStepOptions(m.options)})).on("hide",(()=>{t(m.el).removeAttr("hidden"),setTimeout((function(){t(m.el).attr("hidden","")}),700)})),v=e.addStep({id:"rg-purchase-option-paywall-publish",text:Q("When you’re ready to activate your paywall, connect your account.","revenue-generator"),attachTo:{element:"#rg_js_activatePaywall",on:"bottom"},arrow:!0,classes:"shepherd-content-add-space-bottom fade-in",buttons:[{text:Q("Complete","revenue-generator"),action:e.next,classes:"shepherd-content-complete-tour-element"}],when:{hide(){rgGlobal.sendLPGAEvent("10 - Publish",r,"Complete",0,!0)}}}).on("before-hide",(()=>{const e=v.options.classes;v.options.classes=e.replace("fade-in","fade-out"),v.updateStepOptions(v.options)})).on("hide",(()=>{t(v.el).removeAttr("hidden"),setTimeout((function(){t(v.el).attr("hidden","")}),700)}))})(e),function(e){t(n.exitTour).css({visibility:"visible","pointer-events":"all",cursor:"pointer"}),n.body.addClass("modal-blur"),n.layoutWrapper.css({"pointer-events":"none"}),t(n.purchaseOptionItem).css({"background-color":"darkgray"}),t(n.purchaseOptionItemInfo).css({"border-right":"1px solid #928d8d"}),n.emailSupportButton.hide();const a=["ArrowUp","ArrowDown","ArrowRight","ArrowLeft"],r=function(e){if(a.includes(e.key))return e.preventDefault(),!1};t(document).keydown(r),Shepherd.on("complete",(function(){n.body.removeClass("modal-blur"),n.layoutWrapper.css({"pointer-events":"unset"}),n.searchContentWrapper.css({"background-color":"#fff"}),t(n.purchaseOptionItem).css({"background-color":"#fff"}),t(n.purchaseOptionItemInfo).css({"border-right":"1px solid #e3e4e6"}),t(n.exitTour).remove(),n.emailSupportButton.show(),t(document).unbind("keydown",r);let e="",a="Exit Tour";switch(Shepherd.activeTour.getCurrentStep().id){case"rg-main-search-input":e="1 - Article Search";break;case"rg-purchase-overlay-header":e="2 - Name Paywall";break;case"rg-purchase-option-item":e="3 - Element Hover";break;case"rg-purchase-option-item-edit":e="4 - More Options";break;case"rg-purchase-option-item-title":e="5 - Text Edit";break;case"rg-purchase-option-item-price":e="6 - Pricing";break;case"rg-purchase-option-item-add":e="7 - Add Purchase Option";break;case"rg-purchase-option-paywall-name":e="8 - Name Paywall";break;case"rg-purchase-option-paywall-actions-search":e="9 - Select Content";break;case"rg-purchase-option-paywall-publish":e="10 - Publish",a="Complete"}rgGlobal.sendLPGAEvent(e,"LP RevGen Paywall Tutorial",a,0,!0),setTimeout((function(){p()}),500)})),e.start()}(e)}const a=n.select2Multiple.val();if(a&&a.length>0){const e=t(".select2-selection--multiple .select2-search.select2-search--inline");e.trigger("click"),e.trigger("click")}})),n.body.on("click",n.purchaseOptionItemTitle,(function(){this.addEventListener("input",(function(){t(this).closest(n.purchaseOptionItem).attr("data-custom-title","1")}))})),n.body.on("click",n.purchaseOptionItemDesc,(function(){this.addEventListener("input",(function(){t(this).closest(n.purchaseOptionItem).attr("data-custom-desc","1")}))})),n.body.on("click",".shepherd-button",(function(){const e=Shepherd.activeTour.getCurrentStep().id;t(n.purchaseOptionItem).css({"background-color":"darkgray"}),t(n.purchaseOptionItemInfo).css({"border-right":"1px solid #928d8d"}),"rg-purchase-option-item"===e?(t(n.previewSecondItem).trigger("mouseenter"),n.searchContentWrapper.css({"background-color":"#a9a9a9"}),t(n.previewSecondItem).css({"background-color":"#fff"}),t(n.previewSecondItem).find(n.purchaseOptionItemInfo).css({"border-right":"1px solid #e3e4e6"})):"rg-purchase-option-item-price"===e?t(n.previewSecondItem).trigger("mouseleave"):"rg-purchase-option-paywall-name"===e?(t(n.paywallAppliesTo).val("category"),t(n.paywallAppliesTo).trigger("change")):"rg-purchase-option-paywall-publish"===e&&n.activatePaywall.css("background-color","#000")})),n.body.on("click",n.exitTour,(function(){"undefined"!=typeof Shepherd&&void 0!==Shepherd.activeTour&&Shepherd.activeTour.complete()})),n.postPreviewWrapper.on("click",(function(){n.searchContentWrapper.removeClass("searching"),n.searchResultWrapper.hide(),n.searchContentWrapper.find("label").show();const e=n.searchContent.val().trim(),a=t(n.postTitle).text().trim();e!==a&&n.searchContent.val(a)})),n.body.on("click",n.searchResultItem,(function(){const e=t(this).attr("data-id");d(e)})),n.searchContent.on("focus",(function(){n.postPreviewWrapper.addClass("blury"),t("html, body").animate({scrollTop:0},"slow"),n.body.css({overflow:"hidden",height:"100%"})})),n.searchContent.on("click",(function(){if(!n.currentPaywall.val())return!1;new Z({id:"rg-modal-search-paywall-warning",onConfirm:async()=>{n.searchContent.focus()}})})),n.searchContent.on("focusout",(function(){n.body.css({overflow:"auto",height:"auto"}),n.postPreviewWrapper.removeClass("blury")})),n.searchContent.on("input change",e((function(){n.searchContentWrapper.find("label").hide();const e=t(this).val().trim(),a=t(n.postTitle).text().trim();e.length&&e!==a&&function(e){if(e.length&&!n.requestSent){n.requestSent=!0;const a={action:"rg_search_preview_content",search_term:e,security:revenueGeneratorGlobalOptions.rg_paywall_nonce};t.ajax({url:revenueGeneratorGlobalOptions.ajaxUrl,method:"POST",data:a,dataType:"json"}).done((function(a){if(n.requestSent=!1,!0===a.success){n.searchContentWrapper.addClass("searching"),n.searchResultWrapper.empty(),a.preview_posts.forEach((function(a){const r="post"===a.type?"dashicons-admin-post":"dashicons-admin-page",o=a.title,i=new RegExp(e,"i"),s=o.replace(i,`<b>${e}</b>`),c=t("<span/>",{"data-id":a.id,class:"rev-gen-preview-main--search-results-item dashicons-before"}).append(s);c.addClass(r),n.searchResultWrapper.append(c),n.searchResultWrapper.css({display:"flex"})}));const r="LP RevGen Paywall Preview",o="";rgGlobal.sendLPGAEvent("Article Search",r,o,0,!0)}else n.snackBar.showSnackbar(a.msg,1500)}))}}(e)}),500)),n.searchPaywallContent.select2({ajax:{url:revenueGeneratorGlobalOptions.ajaxUrl,dataType:"json",delay:500,type:"POST",data:e=>({term:e.term,action:"rg_search_term",security:revenueGeneratorGlobalOptions.rg_paywall_nonce}),processResults(e){const n=[];return e&&t.each(e.categories,(function(t){const a=e.categories[t];n.push({id:a.term_id,text:a.name})})),{results:n}},cache:!0},width:"auto",dropdownAutoWidth:!0,dropdownCssClass:":all:",placeholder:Q("Search","revenue-generator"),language:{inputTooShort:()=>Q("Please enter 1 or more characters.","revenue-generator"),noResults:()=>Q("No results found.","revenue-generator")},minimumInputLength:1,closeOnSelect:!1}),n.searchPaywallContent.on("change",(function(){const e=t(this).val(),a=JSON.stringify(e);a&&function(e){if(!n.requestSent){n.requestSent=!0;const a={action:"rg_clear_category_meta",rg_category_id:e,security:revenueGeneratorGlobalOptions.rg_paywall_nonce};t.ajax({url:revenueGeneratorGlobalOptions.ajaxUrl,method:"POST",data:a,dataType:"json"}).done((function(){n.requestSent=!1}))}}(a),a&&(n.postPreviewWrapper.attr("data-access-id",a),n.savePaywall.removeAttr("disabled"),n.activatePaywall.removeAttr("disabled"))})),n.searchPost.select2({ajax:{url:revenueGeneratorGlobalOptions.ajaxUrl,dataType:"json",delay:500,type:"POST",data:e=>({term:e.term,action:"rg_search_post",security:revenueGeneratorGlobalOptions.rg_paywall_nonce}),processResults(e){const n=[];return e&&t.each(e.posts,(function(t){const a=e.posts[t];n.push({id:a.ID,text:a.post_title})})),{results:n}},cache:!0},dropdownAutoWidth:!0,dropdownCssClass:":all:",placeholder:Q("search","revenue-generator"),language:{inputTooShort:()=>Q("Please enter 1 or more characters.","revenue-generator"),noResults:()=>Q("No results found.","revenue-generator")},minimumInputLength:1,closeOnSelect:!1}),n.select2Multiple.on("select2:close",(function(){const e=t(this).siblings("span.select2").find(".select2-selection--multiple"),n=t(this).select2("data").length,a=e.find(".select2-selection__rendered .select2-search--inline input");a.attr("placeholder",n+" items selected"),a.css("width","100%")})),n.searchPost.on("change",(function(){const e=t(this).val(),a=JSON.stringify(e);e&&(n.searchPostWrapper.attr("data-access-id",a),n.savePaywall.removeAttr("disabled"),n.activatePaywall.removeAttr("disabled"))})),n.previewWrapper.on("click",(function(e){const a=t(e.target),r=a.parent(".rg-purchase-overlay-option-edit").length;if(!a.parents(".rg-purchase-overlay-option-manager").length&&!t(".rev-gen-modal").length&&!r){e.preventDefault();const a=n.body.find(".rg-purchase-overlay-option-manager");t.each(a,(function(e,n){"none"!==t(n).css("display")&&t(n).trigger("option-manager-close")}))}a.parents(".rg-purchase-overlay-option-manager").length||(t(".pricing-info-modal").length&&n.body.find("#pricing-info-modal").trigger("click"),t(".revenue-info-modal").length&&n.body.find("#revenue-info-modal").trigger("click"))})),n.body.on("mouseenter",n.purchaseOptionItem,(function(){n.purchaseOverlay.children(".rg-purchase-overlay-highlight").hide(),t(n.purchaseOverlayRemove).hide();const e=t(this).find(".rg-purchase-overlay-purchase-options-item-actions"),a=e.length,r=t(this).children(".rg-purchase-overlay-purchase-options-item-highlight");if(a)e.show(),t(r).show();else{const e=wp.template("revgen-purchase-overlay-actions")();t(r).show(),t(this).prepend(e)}})),n.body.on("mouseleave",n.purchaseOptionItem,(function(){t(this).children(".rg-purchase-overlay-purchase-options-item-highlight").hide(),n.body.find(".rg-purchase-overlay-option-manager:visible").length||t(this).find(".rg-purchase-overlay-purchase-options-item-actions").hide()})),n.body.on("click",n.editOption,(function(){const e=t(this),r=t(this).parents(".rg-purchase-overlay-purchase-options-item");let o=r.find(".rg-purchase-overlay-option-manager");const i=t(this).children(".rg-purchase-overlay-purchase-options-item-highlight"),s=t(n.purchaseOptionItems);let c=!1;if(s.children(n.purchaseOptionItem).each((function(){"individual"===t(this).attr("data-purchase-type")&&(c=!0)})),o.length)c&&o.find(".rg-purchase-overlay-option-manager-entity").find("option").filter("[value=individual]").attr("disabled",!0),o.toggle(),i.show();else{const e=r.attr("data-purchase-type"),a={entityType:e},i=wp.template("revgen-purchase-overlay-item-manager")(a);r.prepend(i),o=r.find(".rg-purchase-overlay-option-manager");const s=o.find(".rg-purchase-overlay-option-manager-entity");t(".rg-purchase-overlay-option-manager div").css({"border-bottom-color":"#e3e4e6"}),t(".rg-purchase-overlay-option-manager select").css({"border-color":"#e3e4e6"});const l=o.find(n.durationWrapper);if("individual"!==e)o.find(n.individualPricingWrapper).hide(),l.find(n.periodSelection).val(r.attr("data-expiry-duration")),l.find(n.periodCountSelection).val(r.attr("data-expiry-period")),l.show(),c&&s.find("option").filter("[value=individual]").attr("disabled",!0);else{l.hide();const e=r.attr("data-pricing-type"),t=o.find(n.individualPricingWrapper);"dynamic"===e?(t.find(n.individualPricingSelection).prop("checked",!0),t.find(".static-pricing").addClass("unchecked")):(t.find(n.individualPricingSelection).prop("checked",!1),t.find(".dynamic-pricing").addClass("unchecked"))}const p=o.find(n.purchaseRevenueWrapper);"subscription"===e?(o.find("div").css({height:" 55px"}),p.hide()):("ppu"===r.find(n.purchaseOptionItemPrice).attr("data-pay-model")?(p.find(n.purchaseRevenueSelection).prop("checked",!0),p.find(".pay-now").addClass("unchecked")):(p.find(n.purchaseRevenueSelection).prop("checked",!1),p.find(".pay-later").addClass("unchecked")),p.show())}t(".rev-gen__select2",o).each((function(){t(this).select2({width:"auto",dropdownAutoWidth:!0,dropdownParent:t(this).parent(),dropdownCssClass:":all:",minimumResultsForSearch:-1})}));const l=o.css("display"),p=r.find(".rg-purchase-overlay-purchase-options-item-actions");if(n.body.find(".rg-purchase-overlay-option-manager").hide(),n.body.find(".rg-purchase-overlay-purchase-options-item-actions").hide(),p.show(),"none"===l){const t=r.attr("data-custom-title"),n=r.attr("data-custom-desc");a(e,t,n)}o.css({display:l})})),n.body.on("option-manager-close",n.optionManager,(function(){const e=t(this);e.hide();const r=e.closest(n.purchaseOptionItem),o=r.attr("data-custom-title"),i=r.attr("data-custom-desc");a(e,o,i)})),n.body.on("click",n.optionRemove,(function(){const e=t(this).parents(".rg-purchase-overlay-purchase-options-item"),a=e.attr("data-purchase-type");let r;switch(a){case"individual":r=e.attr("data-paywall-id");break;case"timepass":r=e.attr("data-tlp-id");break;case"subscription":r=e.attr("data-sub-id")}"individual"!==a&&r?new Z({id:"rg-modal-purchase-option-update",templateData:{optionType:a},onConfirm:async()=>{e.remove(),m(),g(a,r),n.isPublish=!0,n.savePaywall.trigger("click")}}):(e.remove(),m(),g(a,r),n.isPublish=!0,n.savePaywall.trigger("click"))})),n.body.on("change",n.purchaseOptionType,(function(){const e=t(this).parents(".rg-purchase-overlay-option-manager"),a=e.find(".rg-purchase-overlay-option-manager-entity"),r=e.find(n.individualPricingWrapper),o=e.find(n.purchaseRevenueWrapper),i=e.find(n.durationWrapper);"individual"===a.val()?(r.show(),i.hide()):(r.hide(),i.show()),"subscription"===a.val()?o.hide():o.show()})),n.body.on("change",n.individualPricingSelection,(function(){const e=t(this).parents(n.purchaseOptionItem),a=t(this).parents(".rg-purchase-overlay-option-manager"),r=a.find(n.individualPricingSelection),o=a.find(n.individualPricingWrapper);if(r.prop("checked")){const a=t(n.purchaseOptionItems),i=a.attr("data-dynamic-price"),s=a.attr("data-dynamic-revenue"),c=e.find(n.purchaseOptionItemPrice);c.attr("data-pay-model",s);const l=t(n.purchaseItemPriceIcon),p=f(i);l.css({display:"none"}),c.text(p),e.attr("data-pricing-type","dynamic"),e.find(n.purchaseItemPriceIcon).show(),r.val(1),o.find(".static-pricing").addClass("unchecked"),o.find(".dynamic-pricing").removeClass("unchecked")}else e.attr("data-pricing-type","static"),e.find(n.purchaseItemPriceIcon).hide(),r.val(0),o.find(".static-pricing").removeClass("unchecked"),o.find(".dynamic-pricing").addClass("unchecked")})),n.body.on("change",n.purchaseRevenueSelection,(function(){const e=t(this).parents(n.purchaseOptionItem),a=t(this).parents(".rg-purchase-overlay-option-manager"),r=a.find(n.purchaseRevenueSelection),o=e.find(n.purchaseOptionItemPrice),i=o.attr("data-pay-model"),s=r.val(),c=e.attr("data-purchase-type"),p=a.find(n.purchaseRevenueWrapper);let d;switch(c){case"individual":d=e.attr("data-paywall-id");break;case"timepass":d=e.attr("data-tlp-id");break;case"subscription":d=e.attr("data-sub-id")}if("individual"!==c&&d&&new Z({id:"rg-modal-purchase-option-update",templateData:{optionType:c},onConfirm:async()=>{r.prop("checked")?(o.attr("data-pay-model","ppu"),r.val(1),y(e,!0),p.find(".pay-later").removeClass("unchecked"),p.find(".pay-now").addClass("unchecked")):(o.attr("data-pay-model","sis"),r.val(0),y(e,!1),p.find(".pay-later").addClass("unchecked"),p.find(".pay-now").removeClass("unchecked"))},onCancel:async()=>{o.attr("data-pay-model",i),r.val(s),r.attr("checked",1===parseInt(s)),y(e,1===parseInt(s)),1===parseInt(s)?(p.find(".pay-later").removeClass("unchecked"),p.find(".pay-now").addClass("unchecked")):(p.find(".pay-later").addClass("unchecked"),p.find(".pay-now").removeClass("unchecked"))}}),r.prop("checked")){o.attr("data-pay-model","ppu"),r.val(1);const a=Q("You'll only be charged once you've reached $5.","revenue-generator");t(e).find(n.purchaseOptionItemDesc).text(a),y(e,!0),p.find(".pay-later").removeClass("unchecked"),p.find(".pay-now").addClass("unchecked")}else{o.attr("data-pay-model","sis"),r.val(0);const a=n.searchContent.val(),i=l(Q("Get lifetime access to %1$s now!","revenue-generator"),a);t(e).find(n.purchaseOptionItemDesc).text(i),y(e,!1),p.find(".pay-later").addClass("unchecked"),p.find(".pay-now").removeClass("unchecked")}})),n.body.on("change",n.periodSelection,(function(){const e=t(this).parents(".rg-purchase-overlay-option-manager"),a=e.find(n.periodSelection),r=e.find(n.periodCountSelection);(function(e,n){const a=[];let r=24;switch(e){case"y":r=1;break;case"m":r=12;break;case"d":default:r=24}for(let e=1;e<=r;e++){const n=t("<option/>",{value:e});n.text(e),a.push(n)}t(n).find("option").remove().end().append(a)})(a.val(),r),t(this).parents(n.purchaseOptionItem).attr("data-expiry-duration",a.val())})),n.body.on("change",n.periodCountSelection,(function(){const e=t(this).parents(".rg-purchase-overlay-option-manager").find(n.periodCountSelection);t(this).parents(n.purchaseOptionItem).attr("data-expiry-period",e.val())})),n.body.on("focus",n.purchaseOptionItemPrice,(function(){const e=t(this).text().trim();t(this).attr("data-current-value",e)})).on("input change",n.purchaseOptionItemPrice,e((function(){const e=t(this).parents(n.purchaseOptionItem),a=e.find(n.purchaseOptionItemPrice),r=t(this).attr("data-current-value"),o=a.text().trim(),i=e.find(n.purchaseOptionPriceSymbol),s=e.attr("data-purchase-type"),c=a.attr("data-pay-model");let l;switch(i.text().trim().length||revenueGeneratorGlobalOptions.globalOptions.merchant_currency.length||new Z({id:"rg-modal-choose-currency",onConfirm:async(e,a)=>{const r=new Event("rev-gen-modal-close"),o={action:"rg_update_currency_selection",config_key:"merchant_currency",config_value:t("input:radio[name=currency]:checked").val(),security:revenueGeneratorGlobalOptions.rg_paywall_nonce};t.ajax({url:revenueGeneratorGlobalOptions.ajaxUrl,method:"POST",data:o,dataType:"json"}).done((function(e){n.snackBar.showSnackbar(e.msg,1500),a.dispatchEvent(r),t(n.purchaseOptionItems).children(n.purchaseOptionItem).each((function(){const e=t(this).find(n.purchaseOptionPriceSymbol),a="USD"===o.config_value?"$":"€";e.empty().text(a)}))}))}}),s){case"individual":l=e.attr("data-paywall-id");break;case"timepass":l=e.attr("data-tlp-id");break;case"subscription":l=e.attr("data-sub-id")}if("individual"!==s&&l)new Z({id:"rg-modal-purchase-option-update",templateData:{optionType:s},onConfirm:async()=>{const n=f(o,"subscription"===s);t(this).empty().text(n),v(n,e)},onCancel:async()=>{const n=f(r,"subscription"===s);t(this).empty().text(n),v(n,e)}});else{const a=f(o,"subscription"===s);t(n.purchaseItemPriceIcon).css({display:"none"}),t(this).text(a),v(a,e)}c!==a.attr("data-pay-model")&&("ppu"===a.attr("data-pay-model")?n.snackBar.showSnackbar(Q("Pay Now is only available for prices set to $1.99 or higher.","revenue-generator"),2500):n.snackBar.showSnackbar(Q("Pay Later is only available for prices set less than $5.","revenue-generator"),2500)),m()}),1e3)),n.body.on("change",n.paywallAppliesTo,(function(){if("exclude_category"===t(this).val()||"category"===t(this).val()){n.searchPostWrapper.hide(),n.searchPaywallWrapper.show(),n.searchPaywallContent.length&&null===n.searchPaywallContent.val()&&(n.savePaywall.attr("disabled",!0),n.activatePaywall.attr("disabled",!0));const e=JSON.stringify(n.searchPaywallContent.val());n.postPreviewWrapper.attr("data-access-id",e)}else"specific_post"===t(this).val()?(n.searchPaywallWrapper.hide(),n.searchPostWrapper.show(),n.searchPost.length&&null===n.searchPost.val()&&(n.savePaywall.attr("disabled",!0),n.activatePaywall.attr("disabled",!0))):(n.savePaywall.removeAttr("disabled"),n.activatePaywall.removeAttr("disabled"),n.searchPaywallWrapper.hide(),n.searchPostWrapper.hide(),n.postPreviewWrapper.attr("data-access-id",n.postPreviewWrapper.attr("data-preview-id")))})),n.body.on("click",n.addOptionArea,(function(){const e=t(n.purchaseOptionItems).find(n.purchaseOptionItem).length;if(e<5){const e=wp.template("revgen-default-purchase-option-item");t(n.purchaseOptionItems).append(e)}5<=e+parseInt(1)&&t(n.optionArea).hide(),m()})),n.body.on("click",n.purchaseOptionInfoButton,(function(e){e.stopPropagation();const n=t(this).attr("data-info-for");t(".rev-gen-modal, .rev-gen-modal-overlay").remove(),new Z({id:`rg-modal-info-${n}`,closeOutside:!0});let a="";"revenue"===n?a="Pay Now v Pay Later":"pricing"===n&&(a="Static Pricing v Dynamic Pricing"),rgGlobal.sendLPGAEvent("Help","LP RevGen Configure Paywall",a,0,!0)})),n.purchaseOverlay.on("mouseenter",(function(){t(n.purchaseOptionItems).attr("data-paywall-id").length&&(n.purchaseOverlay.children(".rg-purchase-overlay-highlight").show(),t(n.purchaseOverlayRemove).show())})),n.purchaseOverlay.on("mouseleave",(function(){n.purchaseOverlay.children(".rg-purchase-overlay-highlight").hide(),t(n.purchaseOverlayRemove).hide()})),n.body.on("click",n.purchaseOverlayRemove,(function(){new Z({id:"rg-modal-remove-paywall",onConfirm:async()=>{const e={action:"rg_remove_paywall",id:t(n.purchaseOptionItems).attr("data-paywall-id"),security:revenueGeneratorGlobalOptions.rg_paywall_nonce};t.ajax({url:revenueGeneratorGlobalOptions.ajaxUrl,method:"POST",data:e,dataType:"json"}).done((function(e){const a=n.paywallName.text().trim();n.snackBar.showSnackbar(e.msg,1500),n.purchaseOverlay.remove(),n.actionsWrapper.css({width:"75%","background-color":"rgba(239, 239, 239, 0.3)","backdrop-filter":"blur(10px)"});const r=wp.template("revgen-add-paywall");n.actionsWrapper.empty().append(r),e.preview_id&&t(n.addPaywall).attr("data-preview-id",e.preview_id),rgGlobal.sendLPGAEvent("Paywall Deleted","LP RevGen Configure Paywall",a,0,!0)}))}})})),n.body.on("click",n.addPaywall,(function(){const e=t(n.addPaywall).attr("data-preview-id");e&&d(e)})),n.body.on("click",n.gotoDashboard,(function(){const e=t(this).attr("data-dashboard-url");e&&(window.location.href=e)})),n.paywallName.on("keydown",(function(e){if(20<=t(this).text().trim().length)switch(e.keyCode){case 8:case 9:case 13:case 37:case 38:case 39:case 40:break;default:const t=new RegExp("^[a-zA-Z0-9.,/ $@()]+$"),n=e.key;if(t.test(n))return e.preventDefault(),!1}})),n.paywallName.on("focusout",(function(){if(n.paywallNameData!==t(this).text().trim()){const e="LP RevGen Configure Paywall",a="Edit Title",r=t(this).text().trim()+" - "+t(n.paywallTitle).text().trim();rgGlobal.sendLPGAEvent(a,e,r,0,!0),n.paywallNameData=t(this).text().trim()}})),n.body.on("change",n.entitySelection,(function(){const e=t(this).parents(n.purchaseOptionItem),a=e.attr("data-purchase-type"),r=t(this).val(),o=e.find(".rg-purchase-overlay-option-manager"),i=o.find("div"),s=t(e).find(n.editOption);let c;if(a!==r)if("subscription"===a?c=e.attr("data-sub-id"):"timepass"===a?c=e.attr("data-tlp-id"):"individual"===a&&(c=e.attr("data-paywall-id")),"individual"!==a&&c&&new Z({id:"rg-modal-purchase-option-update",templateData:{optionType:a},onConfirm:async()=>{g(a,c,!1),n.isPublish=!0,n.savePaywall.trigger("click")},onCancel:async()=>(e.attr("data-purchase-type",a),t(this).val(a),!1)}),e.removeAttr("data-purchase-type"),e.removeAttr("data-expiry-duration"),e.removeAttr("data-expiry-period"),e.removeAttr("data-pricing-type"),e.removeAttr("data-paywall-id"),e.removeAttr("data-tlp-id"),e.removeAttr("data-sub-id"),e.removeAttr("data-uid"),e.removeAttr("data-order"),e.attr("data-order",""),e.attr("data-uid",""),e.attr("data-purchase-type",r),t(this).val(r),"individual"!==r){const t=e.find(n.purchaseOptionItemPrice);if(t.removeAttr("data-pay-model"),"timepass"===r){const a=revenueGeneratorGlobalOptions.defaultConfig.timepass;e.attr("data-tlp-id",""),e.attr("data-expiry-duration",a.duration),e.attr("data-expiry-period",a.period),t.attr("data-pay-model",a.revenue),t.text(a.price),e.find(n.purchaseOptionItemTitle).text(a.title),e.find(n.purchaseOptionItemDesc).text(a.description),i.removeClass("rg-purchase-overlay-option-manager-subscription"),o.find(n.periodCountSelection).val(a.period),o.find(n.periodSelection).val(a.duration)}else if("subscription"===r){const a=revenueGeneratorGlobalOptions.defaultConfig.subscription;e.attr("data-sub-id",""),e.attr("data-expiry-duration",a.duration),e.attr("data-expiry-period",a.period),t.attr("data-pay-model",a.revenue),t.text(a.price),e.find(n.purchaseOptionItemTitle).text(a.title),e.find(n.purchaseOptionItemDesc).text(a.description),i.addClass("rg-purchase-overlay-option-manager-subscription"),o.find(n.periodCountSelection).val(a.period),o.find(n.periodSelection).val(a.duration)}}else e.attr("data-pricing-type","static"),e.attr("data-paywall-id",""),i.removeClass("rg-purchase-overlay-option-manager-subscription");s.trigger("click")})),n.savePaywall.on("click",(function(){u(),m();const e=t(n.purchaseOptionItems);e.children(n.purchaseOptionItem).each((function(){t(this).attr("data-uid")||t(this).attr("data-uid","xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(e){const t=16*Math.random()|0;return("x"===e?t:3&t|8).toString(16)})))}));const a=e.find("[data-purchase-type='individual']");let r;a.length&&(r={title:a.find(n.purchaseOptionItemTitle).text().trim(),desc:a.find(n.purchaseOptionItemDesc).text().trim(),price:a.find(n.purchaseOptionItemPrice).text().trim(),revenue:a.find(n.purchaseOptionItemPrice).attr("data-pay-model"),type:a.attr("data-pricing-type"),order:a.attr("data-order"),custom_title:a.attr("data-custom-title"),custom_desc:a.attr("data-custom-desc")});const o=e.find("[data-purchase-type='timepass']"),i=[];o.each((function(){const e=t(this),a={title:e.find(n.purchaseOptionItemTitle).text().trim(),desc:e.find(n.purchaseOptionItemDesc).text().trim(),price:e.find(n.purchaseOptionItemPrice).text().trim(),revenue:t(e.find(n.purchaseOptionItemPrice)).attr("data-pay-model"),duration:t(e).attr("data-expiry-duration"),period:t(e).attr("data-expiry-period"),tlp_id:t(e).attr("data-tlp-id"),uid:t(e).attr("data-uid"),order:t(e).attr("data-order"),custom_title:t(e).attr("data-custom-title"),custom_desc:t(e).attr("data-custom-desc")};i.push(a)}));const s=e.find("[data-purchase-type='subscription']"),c=[];s.each((function(){const e=t(this),a={title:e.find(n.purchaseOptionItemTitle).text().trim(),desc:e.find(n.purchaseOptionItemDesc).text().trim(),price:e.find(n.purchaseOptionItemPrice).text().trim(),revenue:t(e.find(n.purchaseOptionItemPrice)).attr("data-pay-model"),duration:t(e).attr("data-expiry-duration"),period:t(e).attr("data-expiry-period"),sub_id:t(e).attr("data-sub-id"),uid:t(e).attr("data-uid"),order:t(e).attr("data-order"),custom_title:t(e).attr("data-custom-title"),custom_desc:t(e).attr("data-custom-desc")};c.push(a)}));const l=n.searchPost.val();let p="";l&&(p=JSON.stringify(l));const d={id:e.attr("data-paywall-id"),title:n.purchaseOverlay.find(n.paywallTitle).text().trim(),desc:n.purchaseOverlay.find(n.paywallDesc).text().trim(),name:n.paywallName.text().trim(),applies:t(n.paywallAppliesTo).val(),specific_posts:p,preview_id:n.postPreviewWrapper.attr("data-preview-id")},g={action:"rg_update_paywall",post_id:n.postPreviewWrapper.attr("data-access-id"),paywall:d,individual:r,time_passes:i,subscriptions:c,security:revenueGeneratorGlobalOptions.rg_paywall_nonce};var v,y;v=revenueGeneratorGlobalOptions.ajaxUrl,y=g,t.ajax({url:v,method:"POST",data:y,dataType:"json"}).done((function(e){h(),n.snackBar.showSnackbar(e.msg,1500),t(n.purchaseOptionItems).find(n.purchaseOptionItem).length<5&&t(n.optionArea).show();let a="",r="";r=n.isPublish?"Publish":"Save";const o="LP RevGen Paywall Publish",i=y.paywall.name;let s=revenueGeneratorGlobalOptions.merchant_id;!s&&t(n.accountActionId).val()&&(s=t(n.accountActionId).val());const c=y.paywall.applies,l=y.post_id,p=y.subscriptions.length,d=y.time_passes.length,u=parseInt(p)+parseInt(d);a=s+" - "+e.paywall_id+" - "+i+" - "+c+" - "+l+" - "+u,rgGlobal.sendLPGAEvent(r,o,a,0,!0);const g=t(n.purchaseOptionItems);r="Paywall Details",g.attr("data-paywall-id",e.paywall_id);const m=g.find("[data-purchase-type='individual']");if(m.length){m.attr("data-paywall-id",e.paywall_id);let t=y.individual.type;if("dynamic"!==t){const e=y.individual.revenue;"ppu"===e?t="Pay Later":"sis"===e&&(t="Pay now")}const n=y.individual.price;a=revenueGeneratorGlobalOptions.merchant_id+" - "+e.paywall_id+" - Single Article - "+t+" - "+n,rgGlobal.sendLPGAEvent(r,o,a,0,!0)}const v=g.find("[data-purchase-type='timepass']");v.length&&v.each((function(n){const i=t(this).attr("data-uid");t(this).attr("data-tlp-id",e.time_passes[i]);const s=y.time_passes[n].revenue;let c="";"ppu"===s?c="Pay Later":"sis"===s&&(c="Pay now");const l=y.time_passes[n].price,p=y.time_passes[n].period+y.time_passes[n].duration;a=revenueGeneratorGlobalOptions.merchant_id+" - "+e.paywall_id+" - Time Pass - "+c+" - "+p+" - "+l,rgGlobal.sendLPGAEvent(r,o,a,0,!0)}));const f=g.find("[data-purchase-type='subscription']");f.length&&f.each((function(n){const i=t(this).attr("data-uid");t(this).attr("data-sub-id",e.subscriptions[i]);const s=y.subscriptions[n].revenue;let c="";"ppu"===s?c="Pay Later":"sis"===s&&(c="Pay now");const l=y.subscriptions[n].price,p=y.subscriptions[n].period+y.subscriptions[n].duration;a=revenueGeneratorGlobalOptions.merchant_id+" - "+e.paywall_id+" - Subscription - "+c+" - "+p+" - "+l,rgGlobal.sendLPGAEvent(r,o,a,0,!0)})),e.redirect_to&&!1===n.isPublish&&(window.location.href=e.redirect_to)}))})),n.activatePaywall.on("click",(function(){if(0===parseInt(revenueGeneratorGlobalOptions.globalOptions.is_merchant_verified))!function(){const e=new Event("rev-gen-modal-close");new Z({id:"rg-modal-account-activation",keepOpen:!0,templateData:{},onConfirm:async(t,n)=>{n.dispatchEvent(e),s()},onCancel:async(t,n)=>{if(revenueGeneratorGlobalOptions.globalOptions.merchant_region.length){const t=revenueGeneratorGlobalOptions.globalOptions.merchant_region,a=revenueGeneratorGlobalOptions.signupURL;"US"===t?window.open(a.US,"_blank"):window.open(a.EU,"_blank"),n.dispatchEvent(e),s()}rgGlobal.sendLPGAEvent("Connect Account","LP RevGen Account","Signup",0,!0)}})}();else{let e;const a=t(n.purchaseOptionItem);let r=!1;t.each(a,(function(n,a){const o=t(a),i=o.attr("data-purchase-type");switch(i){case"individual":e=o.attr("data-paywall-id");break;case"timepass":e=o.attr("data-tlp-id");break;case"subscription":e=o.attr("data-sub-id")}r||e||"individual"===i||(r=!0)})),r?new Z({id:"rg-modal-purchase-option-update",templateData:{optionType:"newPurchaseOption"},onConfirm:async()=>{n.isPublish=!0,n.savePaywall.trigger("click"),n.savePaywall.addClass("hide"),u(),setTimeout((function(){i(),h(),n.isPublish=!1}),1500)}}):(n.isPublish=!0,n.savePaywall.trigger("click"),n.savePaywall.addClass("hide"),u(),setTimeout((function(){i(),h(),n.isPublish=!1}),1500))}})),n.body.on("click",n.activateSignup,(function(){if(revenueGeneratorGlobalOptions.globalOptions.merchant_region.length){const e=revenueGeneratorGlobalOptions.globalOptions.merchant_region,t=revenueGeneratorGlobalOptions.signupURL;"US"===e?window.open(t.US,"_blank"):window.open(t.EU,"_blank")}})),n.body.on("click",n.warningSignup,(function(){if(revenueGeneratorGlobalOptions.globalOptions.merchant_region.length){const e=revenueGeneratorGlobalOptions.globalOptions.merchant_region,t=revenueGeneratorGlobalOptions.signupURL;"US"===e?window.open(t.US,"_blank"):window.open(t.EU,"_blank")}})),n.body.on("input change",n.accountActionId,(function(){r()&&t("body #rg_js_modal_confirm").removeAttr("disabled")})),n.body.on("input change",n.accountActionKey,(function(){r()&&t("body #rg_js_modal_confirm").removeAttr("disabled")})),n.body.on("input change",n.currencyRadio,(function(){n.currencyRadio&&t("#rg_js_modal_confirm",n.body).removeAttr("disabled")})),n.body.on("click",n.viewPost,(function(){const e=t(this).attr("data-target-id"),a=n.searchPaywallContent.val(),r=t(n.paywallAppliesTo).val(),i=n.searchPost.val();e&&o(e,a,r,i)})),n.body.on("click",n.viewDashboard,(function(){const e=t(this).attr("data-dashboard-url");e&&(window.location.href=e)})),function(){if(n.postContent){n.postContent.addClass("blur-content");const e=wp.template("revgen-purchase-overlay");n.purchaseOverlay.append(e),n.purchaseOverlay.show()}}())}()}))}(jQuery),function(e){e((function(){!function(){const n={body:e("body"),requestSent:!1,paywallContent:".rev-gen-dashboard-content",paywallPreview:".rev-gen-dashboard-content-paywall-preview",paywallContentWrapper:".rev-gen-dashboard-content-paywall",removePaywallDashboard:".rev-gen-dashboard-remove-paywall",newPaywall:e("#rg_js_newPaywall"),newContribution:e("#rg_js_newContribution"),sortPaywalls:e("#rg_js_filterPaywalls"),searchPaywall:e("#rg_js_searchPaywall"),editPayWallName:e(".rev-gen-dashboard-paywall-name"),paywallSearchIcon:e(".rev-gen-dashboard-bar--search-icon"),laterpayLoader:e(".laterpay-loader-wrapper"),contributionDelete:e(".rev-gen-dashboard__contribution-delete"),contributionCopyShortcode:e(".rev-gen-dashboard__link--copy-shortcode"),restartTour:e("#rg_js_RestartTutorial"),restartTourContribution:e("#rg_js_RestartTutorial_Contribution"),snackBar:e("#rg_js_SnackBar")};n.body.on("click",n.paywallPreview,(function(){const t=e(this).closest(n.paywallContentWrapper).attr("data-paywall-id");t&&(window.location.href=revenueGeneratorGlobalOptions.paywallPageBase+"&current_paywall="+t)})),n.restartTour.on("click",(function(){const t={action:"rg_restart_tour",tour_type:"paywall_tutorial_done",restart_tour:"1",security:revenueGeneratorGlobalOptions.rg_paywall_nonce};e.ajax({url:revenueGeneratorGlobalOptions.ajaxUrl,method:"POST",data:t,dataType:"json"}).done((function(e){!0===e.success&&(window.location=n.newPaywall.attr("href"))}))})),n.restartTourContribution.on("click",(function(){const t={action:"rg_restart_tour",tour_type:"is_contribution_tutorial_completed",restart_tour:"1",security:revenueGeneratorGlobalOptions.rg_paywall_nonce};e.ajax({url:revenueGeneratorGlobalOptions.ajaxUrl,method:"POST",data:t,dataType:"json"}).done((function(e){!0===e.success&&(window.location=n.newContribution.attr("href"))}))})),n.sortPaywalls.on("change",(function(){const t=e(this).val(),n={action:"rg_set_paywall_order",rg_current_url:window.location.href,rg_sort_order:t,security:revenueGeneratorGlobalOptions.rg_paywall_nonce};e.ajax({url:revenueGeneratorGlobalOptions.ajaxUrl,method:"POST",data:n,dataType:"json"}).done((function(e){!0===e.success&&e.redirect_to&&(window.location.href=e.redirect_to)}))})),n.searchPaywall.on("focus",(function(){e(n.paywallContent).addClass("blury"),n.body.css({height:"100%"}),e(this).val().trim().length&&n.searchPaywall.trigger("change")})),n.searchPaywall.on("focusout",(function(){n.body.css({height:"auto"}),e(n.paywallContent).removeClass("blury")})),e(n.paywallContent).on("click",(function(){n.body.css({overflow:"auto",height:"auto"}),e(n.paywallContent).removeClass("blury")})),n.paywallSearchIcon.on("click",(function(){n.laterpayLoader.css({display:"flex"});!function(t){if(!n.requestSent)if(n.requestSent=!0,t.length){const a={action:"rg_search_paywall",rg_current_url:window.location.href,search_term:t,security:revenueGeneratorGlobalOptions.rg_paywall_nonce};e.ajax({url:revenueGeneratorGlobalOptions.ajaxUrl,method:"POST",data:a,dataType:"json"}).done((function(e){n.requestSent=!1,!0===e.success&&e.redirect_to&&(window.location.href=e.redirect_to)}))}else{const e=new URL(window.location.href),t=e.searchParams;t.delete("search_term"),e.search=t.toString();const n=e.toString();window.location.href=n}}(n.searchPaywall.val().trim())})),n.searchPaywall.on("keyup",(function(e){13===e.keyCode&&n.paywallSearchIcon.trigger("click")})),n.editPayWallName.on("focusout",(function(){if(!n.requestSent){n.requestSent=!0,e(n.paywallContent).addClass("blury"),n.body.css({overflow:"hidden",height:"100%"});const t={action:"rg_set_paywall_name",new_paywall_name:e(this).text().trim(),paywall_id:e(this).closest(n.paywallContentWrapper).attr("data-paywall-id"),security:revenueGeneratorGlobalOptions.rg_paywall_nonce};e.ajax({url:revenueGeneratorGlobalOptions.ajaxUrl,method:"POST",data:t,dataType:"json"}).done((function(t){n.snackBar.showSnackbar(t.msg,1500),n.body.css({overflow:"auto",height:"auto"}),e(n.paywallContent).removeClass("blury"),n.requestSent=!1}))}})),n.editPayWallName.on("keydown",(function(t){if(20<=e(this).text().trim().length)switch(t.keyCode){case 8:case 9:case 13:case 37:case 38:case 39:case 40:break;default:const e=new RegExp("^[a-zA-Z0-9.,/ $@()]+$"),n=t.key;if(e.test(n))return t.preventDefault(),!1}})),n.contributionDelete.on("click",(function(t){t.preventDefault();const a=e(t.target),r=a.data("id"),o=a.data("nonce");new Z({id:"rg-modal-remove-contribution",templateData:{isEditable:parseInt(a.data("editable"),10)},onConfirm:async()=>{e.ajax({url:revenueGeneratorGlobalOptions.ajaxUrl,data:{action:"rg_contribution_delete",security:o,id:r},success:e=>{n.snackBar.showSnackbar(e.data.msg,1500),setTimeout((()=>{window.location.reload()}),1500)}})},onCancel:()=>{}})})),n.contributionCopyShortcode.on("click",(function(a){const r=e(a.target).data("shortcode");t(r),n.snackBar.showSnackbar(revenueGeneratorGlobalOptions.rg_code_copy_msg,1500)})),n.body.on("click",n.removePaywallDashboard,(function(){const t=e(this).attr("data-paywall-id"),a=e(this).closest(".rev-gen-dashboard-content-paywall-info").find(".rev-gen-dashboard-paywall-name").text().trim();new Z({id:"rg-modal-remove-paywall",onConfirm:async()=>{e.ajax({url:revenueGeneratorGlobalOptions.ajaxUrl,method:"POST",data:{action:"rg_remove_paywall",id:t,security:revenueGeneratorGlobalOptions.rg_paywall_nonce},success:e=>{n.snackBar.showSnackbar(e.msg,1500),rgGlobal.sendLPGAEvent("Paywall Deleted","LP RevGen Configure Paywall",a,0,!0),setTimeout((function(){window.location.reload()}),1500)}})},onCancel:()=>{}})}))}()}))}(jQuery);const Y={contribution:{steps:{preview:[{id:"rg-tutorial-contribution-box",text:Q("This is a preview of your selected Contribution type.","revenue-generator")+"<br><br>"+Q("Click on text to edit it.","revenue-generator"),attachTo:{element:".rev-gen-contribution__inner",on:"bottom"},buttons:["skip","next"],classes:"fade-in",tracking:{category:"LP RevGen Contributions Tutorial",event:"2 - Text Edit",action:"Continue"}},{id:"rg-tutorial-contribution-amount",text:Q("Click to edit each amount.","revenue-generator")+"<br><br>"+l(Q("Amounts less than $5 will default to %1$spay later%2$s.","revenue-generator"),'<a target="_blank" href="https://www.laterpay.net/academy/getting-started-with-laterpay-the-difference-between-pay-now-pay-later">',"</a>"),attachTo:{element:".rev-gen-contribution__donation",on:"top"},buttons:["skip","next"],classes:"fade-in",tracking:{category:"LP RevGen Contributions Tutorial",event:"3 - Amount Edit",action:"Continue"}}],builder:[[{id:"rg-tutorial-layout-select",text:Q("First, select your desired contribution layout.","revenue-generator"),attachTo:{element:"#rg-contribution-layout-select",on:"top"},buttons:["skip","next"],classes:"fade-in",tracking:{category:"LP RevGen Contributions Tutorial",event:"1 - Layout Select",action:"Continue"}}],[{id:"rg-tutorial-campaign-name",text:Q("Enter the description that you would like to appear on your customer’s invoice.","revenue-generator"),attachTo:{element:"#rg-contribution-campaign-name",on:"top"},buttons:["skip","next"],classes:"fade-in",tracking:{category:"LP RevGen Contributions Tutorial",event:"4 - Campaign Name",action:"Continue"}},{id:"rg-tutorial-submit",text:l(Q("When you’re ready, click here to copy your customized %1$sshortcode%2$s.","revenue-generator"),'<a target="_blank" href="https://wordpress.com/support/shortcodes/">',"</a>"),attachTo:{element:"#rg-contribution-submit",on:"top"},buttons:["skip","gotIt"],classes:"fade-in",tracking:{category:"LP RevGen Contributions Tutorial",event:"5 - Generate Code",action:"Complete"}}]]}},buttons:{skip:{text:Q("Skip Tour","revenue-generator"),action:"cancel",classes:"shepherd-content-skip-tour"},next:{text:Q("Next","revenue-generator"),action:"next",classes:"shepherd-content-next-tour-element"},gotIt:{text:Q("Got it!","revenue-generator"),action:"next",classes:"shepherd-content-next-tour-element"}}};class ee{constructor(e){this.options={stepOptions:{classes:"rev-gen-tutorial-card",scrollTo:{behavior:"smooth",block:"center"}},autoStart:!0,steps:{},onStart:()=>{},onStepHide:()=>{},onComplete:()=>{},...e},this.init()}init(){const e=this;this.tour=new Shepherd.Tour({defaultStepOptions:e.options.stepOptions}),this.addTourSteps(),this.options.autoStart&&(this.tour.start(),this.options.onStart()),Shepherd.on("complete",(()=>{const t=Shepherd.activeTour.getCurrentStep();e.options.onStepHide(t),e.options.onComplete()})),Shepherd.on("cancel",(()=>{const t=Shepherd.activeTour.getCurrentStep();t.options.cancelled=!0,e.options.onStepHide(t)}))}addTourSteps(){const e=this,t=this.options.steps,n=Y.buttons;t.forEach((t=>{const a=[];t.buttons.forEach((t=>{const r=n[t],o={text:r.text,action:e.tour[r.action],classes:r.classes};a.push(o)})),t.buttons=a;const r=e.tour.addStep(t).on("before-hide",(()=>{const e=r.options.classes;r.options.classes=e.replace("fade-in","fade-out"),r.updateStepOptions(r.options)})).on("hide",(()=>{"function"==typeof e.options.onProgress&&e.options.onStepHide(r),r.el.removeAttribute("hidden"),setTimeout((()=>{r.el.setAttribute("hidden","")}),700)}))}))}}const te=revenueGeneratorGlobalOptions;window.RevGenApp={vars:{},views:{}},window.handlePreviewUpdate=(e,t)=>{window.RevGenApp.views.app.trigger("preview-update",{attr:e,value:t})},window.handleIframeLoad=e=>{e.classList.remove("loading")},window.trackTourStep=e=>{const t=e.options.tracking;e.options.cancelled&&"Continue"===t.action&&(t.action="Exit Tour"),rgGlobal.sendLPGAEvent(t.event,t.category,t.action,0,!0)},window.updateTourProgress=()=>{const e=document.getElementById("rg-tour-progress");e.style.display="block";const t=e.querySelector(".active");let n="";t?(n=t.nextElementSibling,t.classList.add("visited"),t.classList.remove("active")):n=e.children[0],n?n.classList.add("active"):e.style.display="none"},((e,n)=>{e((function(){const a={loader:e(".laterpay-loader-wrapper"),snackBar:e("#rg_js_SnackBar")},r=n.View.extend({el:"#rg-contribution-builder-app",events:{"keyup [data-bind]":"onInputChange","change [data-bind]":"onInputChange","change [data-bind=layout_type]":"onLayoutTypeChange","focusout [data-validate]":"onValidatedFieldFocusOut","submit form":"onFormSubmit","click #rg_js_toggle_preview":"onPreviewToggleClick"},initialize(){this.doing_ajax=!1,this.originalData=this.model.toJSON(),this.$o={form:e("#rg_js_form",this.$el),submitButton:e("input[type=submit]",this.$el),helperMessage:e(".rg-contribution-builder__helper-message",this.$el),previewIframe:e("#rg-contribution-builder-preview",this.$el)};const t=this;0!==parseInt(te.globalOptions.is_contribution_tutorial_completed)&&0!==parseInt(te.has_contributions)||window.addEventListener("load",(function(){t.initializeTour()})),window.addEventListener("rg-tour-init",(function(e){e.detail.startAt&&t.initializeTour(e.detail.startAt)})),this.listenTo(this,"preview-update",this.onPreviewUpdate),this.listenTo(this.model,"change",this.onModelChange)},initializeTour(t){(t=parseInt(t,10))||(t=0),this.tour={};const n={steps:Y.contribution.steps.builder[t],onStepHide:e=>{e.options.tracking&&window.trackTourStep(e),window.updateTourProgress()}};t+1===Y.contribution.steps.builder.length?n.onComplete=()=>{const t={action:"rg_complete_tour",config_key:"is_contribution_tutorial_completed",config_value:1,security:te.rg_paywall_nonce};e.ajax({url:te.ajaxUrl,method:"POST",data:t,dataType:"json"})}:n.onComplete=()=>{const e=new Event("rg-init-preview-tour");window.dispatchEvent(e)},this.tour=new ee(n)},onPreviewUpdate(e){if(!e||!e.attr||!e.value)return;const t=this.validateValue(e.attr,e.value);this.model.set(e.attr,t)},validateValue(e,t){let n=t;switch(e){case"amounts":n=[];for(let e=0;e<t.length;e++)"custom"!==t?n.push(parseFloat(t[e])):n.push(t)}return n},onInputChange(t){const n=e(t.target),a=n.attr("data-bind");let r=n.val();r=this.validateValue(a,r),this.model.set(a,r)},onModelChange(e){JSON.stringify(e.toJSON())!==JSON.stringify(this.originalData)?this.enableSubmit():this.disableSubmit()},onLayoutTypeChange(t){const n=e(t.target).val();this.$o.previewIframe.addClass("loading");let a=this.$o.previewIframe.attr("src");a=X(a,{layout_type:n}),this.$o.previewIframe.attr("src",a)},enableSubmit(){this.$o.submitButton.removeAttr("disabled")},disableSubmit(){this.$o.submitButton.attr({disabled:"disabled"})},onValidatedFieldFocusOut(t){const n=e(t.target);this.validateInput(n)?n.removeClass("error"):n.addClass("error")},validateInput(e){if(!e)return;let t=!0;const n=e.attr("data-validation"),a=e.attr("required"),r=e.val();switch(n){case"url":r&&(t=function(e){try{return new URL(e),!0}catch{return!1}}(r));break;default:t=r}return a&&!r&&(t=!1),t},isFormValid(){const t=this;return e("[data-bind]",this.$el).each((function(n,a){const r=e(a);t.validateInput(r)?r.removeClass("error"):r.addClass("error")})),!e("[data-bind].error",this.$el).length},getJSONData(){let e={};const t=this.$o.form.serializeArray(),n=this.model.toJSON();return _(t).each((function(t){e[t.name]=t.value})),e={...e,...n},e},onFormSubmit(n){if(n.preventDefault(),!this.isFormValid())return!1;if(0===parseInt(te.globalOptions.is_merchant_verified))return s(),!1;if(!this.doing_ajax){const n=this;this.doing_ajax=!0,p();const r=this.getJSONData();e.ajax({url:te.ajaxUrl,method:"POST",data:r,dataType:"json"}).done((function(e){if(a.snackBar.showSnackbar(e.msg,1500),e.success){t(e.code),n.$o.submitButton.text(e.button_text),n.disableSubmit(),n.$o.helperMessage.show();const a="New ShortCode\t",o="LP RevGen Contributions",s=i(),c=n.model.get("amounts");let l=s+" - "+r.name;_(c).each((function(e){const t=e.price;l+=" - "+t})),rgGlobal.sendLPGAEvent(a,o,l,0,!0),window.location.href!==e.edit_link&&setTimeout((function(){window.location.href=e.edit_link}),1500)}n.doing_ajax=!1,d()}))}},onPreviewToggleClick(t){const n=e(t.target);this.$el.hasClass("preview-focus")?(this.$el.removeClass("preview-focus"),n.removeClass("mode-collapse"),n.text(n.data("expand-text"))):(this.$el.addClass("preview-focus"),n.addClass("mode-collapse"),n.text(n.data("collapse-text")))}}),o=n.View.extend({el:"#rg-contribution-builder-preview",events:{},initialize(){}}),i=function(){let e=te.merchant_id;return e||(e=window.RevGenApp.vars.merchant_id),e},s=function(){const e=new Event("rev-gen-modal-close");new Z({id:"rg-modal-account-activation",keepOpen:!0,templateData:{},onConfirm:(t,n)=>{n.dispatchEvent(e),c()},onCancel:(t,n)=>{if(revenueGeneratorGlobalOptions.globalOptions.merchant_region.length){const t=revenueGeneratorGlobalOptions.globalOptions.merchant_region,a=revenueGeneratorGlobalOptions.signupURL;"US"===t?window.open(a.US,"_blank"):window.open(a.EU,"_blank"),n.dispatchEvent(e),c()}rgGlobal.sendLPGAEvent("Connect Account","LP RevGen Account","Signup",0,!0)}})},c=function(){new Z({id:"rg-modal-connect-account",keepOpen:!0,templateData:{},bindings:t=>{const n=e(t),a=e("#rev-gen-merchant-id",n),r=e("#rev-gen-api-key",n),o=e("#rg_js_modal_confirm",n);e("input",n).on("keyup",(()=>{a.val()&&r.val()?o.removeAttr("disabled"):o.attr("disabled","disabled")}))},onConfirm:async(t,n)=>{const a=new Event("rev-gen-modal-close"),r=e(n),o=e("#rg_js_restartVerification",r),i=e("#rev-gen-merchant-id",r).val(),s=e("#rev-gen-api-key",r).val();r.addClass("loading"),o.on("click",(function(){n.dispatchEvent(a),c()})),await l(i,s)?(window.RevGenApp.vars.merchant_id=i,n.dispatchEvent(a)):r.removeClass("loading").addClass("modal-error")}})},l=function(t,n){return new Promise((r=>{let o=!1;if(!a.requestSent){a.requestSent=!0;const i={action:"rg_verify_account_credentials",merchant_id:t,merchant_key:n,security:revenueGeneratorGlobalOptions.rg_paywall_nonce};let s="";e.ajax({url:revenueGeneratorGlobalOptions.ajaxUrl,method:"POST",data:i,dataType:"json"}).done((function(e){a.requestSent=!1,revenueGeneratorGlobalOptions.merchant_id=e.merchant_id,!0===e.success?(setTimeout((function(){revenueGeneratorGlobalOptions.globalOptions.is_merchant_verified="1",a.snackBar.showSnackbar(e.msg,1500)}),2e3),s="Success",o=!0):(s="Failure - "+e.msg,o=!1),r(o),rgGlobal.sendLPGAEvent("Connect Account","LP RevGen Account",s,0,!0)}))}}))};!function(){if(!e("#rg-contribution-builder-app").length)return;const t=RevGenContributionData,a=new n.Model(t);window.RevGenApp.views.app=new r({model:a}),window.RevGenApp.views.preview=new o({model:a})}();const p=function(){a.loader.css({display:"flex"})},d=function(){a.loader.hide()}}))})(jQuery,Backbone)})()})();